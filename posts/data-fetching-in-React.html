<!DOCTYPE html><html><head><style id="stitches">--sxs{--sxs:0 t-eMXEYC t-iaQKBC}@media{:root,.t-eMXEYC{--fontSizes-x-small:12px;--fontSizes-smaller:13px;--fontSizes-small:14px;--fontSizes-revert:15px;--fontSizes-medium:16px;--fontSizes-large:18px;--colors-text:#000;--colors-background:linear-gradient(145deg, hsl(300, 7.7%, 97.5%), hsl(0, 0%, 97.3%), hsl(0, 0%, 99.0%));--colors-mauve1:hsl(300, 20.0%, 99.0%);--colors-mauve2:hsl(300, 7.7%, 97.5%);--colors-mauve3:hsl(294, 5.5%, 95.3%);--colors-mauve4:hsl(289, 4.7%, 93.3%);--colors-mauve5:hsl(283, 4.4%, 91.3%);--colors-mauve6:hsl(278, 4.1%, 89.1%);--colors-mauve7:hsl(271, 3.9%, 86.3%);--colors-mauve8:hsl(255, 3.7%, 78.8%);--colors-mauve9:hsl(252, 4.0%, 57.3%);--colors-mauve10:hsl(253, 3.5%, 53.5%);--colors-mauve11:hsl(252, 4.0%, 44.8%);--colors-mauve12:hsl(260, 25.0%, 11.0%);--colors-mauveA1:hsla(300, 89.3%, 18.3%, 0.012);--colors-mauveA2:hsla(300, 78.1%, 9.0%, 0.028);--colors-mauveA3:hsla(300, 99.5%, 7.7%, 0.051);--colors-mauveA4:hsla(270, 90.5%, 6.1%, 0.071);--colors-mauveA5:hsla(270, 83.0%, 5.2%, 0.091);--colors-mauveA6:hsla(300, 93.5%, 3.7%, 0.114);--colors-mauveA7:hsla(270, 82.6%, 3.3%, 0.142);--colors-mauveA8:hsla(255, 95.2%, 3.7%, 0.220);--colors-mauveA9:hsla(255, 94.8%, 3.7%, 0.444);--colors-mauveA10:hsla(253, 96.5%, 3.8%, 0.483);--colors-mauveA11:hsla(247, 97.9%, 3.2%, 0.569);--colors-mauveA12:hsla(261, 98.7%, 3.0%, 0.918);--colors-grayA1:hsla(0, 0%, 0%, 0.012);--colors-grayA2:hsla(0, 0%, 0%, 0.027);--colors-grayA3:hsla(0, 0%, 0%, 0.047);--colors-grayA4:hsla(0, 0%, 0%, 0.071);--colors-grayA5:hsla(0, 0%, 0%, 0.090);--colors-grayA6:hsla(0, 0%, 0%, 0.114);--colors-grayA7:hsla(0, 0%, 0%, 0.141);--colors-grayA8:hsla(0, 0%, 0%, 0.220);--colors-grayA9:hsla(0, 0%, 0%, 0.439);--colors-grayA10:hsla(0, 0%, 0%, 0.478);--colors-grayA11:hsla(0, 0%, 0%, 0.565);--colors-grayA12:hsla(0, 0%, 0%, 0.910);--colors-gray1:hsl(0, 0%, 99.0%);--colors-gray2:hsl(0, 0%, 97.3%);--colors-gray3:hsl(0, 0%, 95.1%);--colors-gray4:hsl(0, 0%, 93.0%);--colors-gray5:hsl(0, 0%, 90.9%);--colors-gray6:hsl(0, 0%, 88.7%);--colors-gray7:hsl(0, 0%, 85.8%);--colors-gray8:hsl(0, 0%, 78.0%);--colors-gray9:hsl(0, 0%, 56.1%);--colors-gray10:hsl(0, 0%, 52.3%);--colors-gray11:hsl(0, 0%, 43.5%);--colors-gray12:hsl(0, 0%, 9.0%)}.t-iaQKBC{--colors-text:#fff;--colors-background:linear-gradient(145deg, hsl(240, 5.1%, 11.6%), hsl(0, 0%, 11.0%));--colors-mauve1:hsl(246, 6.0%, 9.0%);--colors-mauve2:hsl(240, 5.1%, 11.6%);--colors-mauve3:hsl(241, 5.0%, 14.3%);--colors-mauve4:hsl(242, 4.9%, 16.5%);--colors-mauve5:hsl(243, 4.9%, 18.8%);--colors-mauve6:hsl(244, 4.9%, 21.5%);--colors-mauve7:hsl(245, 4.9%, 25.4%);--colors-mauve8:hsl(247, 4.8%, 32.5%);--colors-mauve9:hsl(252, 4.0%, 45.2%);--colors-mauve10:hsl(247, 3.4%, 50.7%);--colors-mauve11:hsl(253, 4.0%, 63.7%);--colors-mauve12:hsl(256, 6.0%, 93.2%);--colors-gray1:hsl(0, 0%, 8.5%);--colors-gray2:hsl(0, 0%, 11.0%);--colors-gray3:hsl(0, 0%, 13.6%);--colors-gray4:hsl(0, 0%, 15.8%);--colors-gray5:hsl(0, 0%, 17.9%);--colors-gray6:hsl(0, 0%, 20.5%);--colors-gray7:hsl(0, 0%, 24.3%);--colors-gray8:hsl(0, 0%, 31.2%);--colors-gray9:hsl(0, 0%, 43.9%);--colors-gray10:hsl(0, 0%, 49.4%);--colors-gray11:hsl(0, 0%, 62.8%);--colors-gray12:hsl(0, 0%, 93.0%);--colors-mauveA1:hsla(0, 0%, 0%, 0);--colors-mauveA2:hsla(240, 76.7%, 91.2%, 0.031);--colors-mauveA3:hsla(240, 86.0%, 95.8%, 0.061);--colors-mauveA4:hsla(240, 91.8%, 94.7%, 0.087);--colors-mauveA5:hsla(240, 91.5%, 95.8%, 0.113);--colors-mauveA6:hsla(240, 92.0%, 93.8%, 0.148);--colors-mauveA7:hsla(240, 94.8%, 95.3%, 0.191);--colors-mauveA8:hsla(249, 98.1%, 95.2%, 0.273);--colors-mauveA9:hsla(248, 97.6%, 96.2%, 0.416);--colors-mauveA10:hsla(248, 95.5%, 96.6%, 0.477);--colors-mauveA11:hsla(250, 98.0%, 98.0%, 0.615);--colors-mauveA12:hsla(240, 93.9%, 99.6%, 0.931);--colors-grayA1:hsla(0, 0%, 100%, 0);--colors-grayA2:hsla(0, 0%, 100%, 0.026);--colors-grayA3:hsla(0, 0%, 100%, 0.056);--colors-grayA4:hsla(0, 0%, 100%, 0.077);--colors-grayA5:hsla(0, 0%, 100%, 0.103);--colors-grayA6:hsla(0, 0%, 100%, 0.129);--colors-grayA7:hsla(0, 0%, 100%, 0.172);--colors-grayA8:hsla(0, 0%, 100%, 0.249);--colors-grayA9:hsla(0, 0%, 100%, 0.386);--colors-grayA10:hsla(0, 0%, 100%, 0.446);--colors-grayA11:hsla(0, 0%, 100%, 0.592);--colors-grayA12:hsla(0, 0%, 100%, 0.923)}}--sxs{--sxs:1 gBOHlM}@media{*{font-family:'Libre Franklin', sans-serif;box-sizing:border-box}body{transition:0.4s ease;background:var(--colors-background);font-size:small;color:var(--colors-text)}}--sxs{--sxs:2 c-ihnpJX c-jVwFOG c-itADDb c-kCtmBT c-jBTSoH c-ebqfxQ c-ebZGPr c-jUZsbQ c-jhvpAX c-gFjXbG c-kVBWyI c-bBtURC c-kKedsK c-tpQqR c-KuLXq c-hacVvm c-iMaIpw c-gxctDW c-iEPeBV c-jvNnTq c-gEVoXa c-iIPFaW c-kdQMfJ c-jZaZAh c-iTsYfy c-dQEzcz c-doStKE c-gwjoON c-dITznf c-hPgLaG c-idZnoe}@media{.c-ihnpJX{display:flex;flex-direction:column;align-items:center;min-height:100vh;padding-top:20px}@media (min-width: 1024px){.c-ihnpJX{padding:5%}}.c-jVwFOG{display:flex;align-items:center;justify-content:space-between}.c-itADDb{font-size:x-large;font-weight:200;color:var(--colors-gray11);cursor:pointer}.c-kCtmBT{display:flex;align-items:center;cursor:pointer;transition:0.4s ease all;color:var(--colors-gray11);padding:2px 5px;border-radius:8px;border:1px solid var(--colors-gray4)}.c-kCtmBT:hover{transition:0.4s ease all;text-decoration:underline;text-decoration-line:line-through;text-decoration-color:var(--colors-mauve9);background:var(--colors-grayA2)}.c-jBTSoH{display:flex;align-items:center;justify-content:center;opacity:1;transistion:0.6s ease all;margin-right:5px}.c-ebqfxQ{font-size:var(--fontSizes-small);font-weight:300;color:var(--colors-gray12);-webkit-user-select:none;user-select:none}.c-ebZGPr{text-decoration:underline;text-decoration-color:var(--colors-mauve9);cursor:pointer;color:var(--colors-gray12)}.c-jUZsbQ{font-size:var(--fontSizes-small);color:var(--colors-mauve9);font-weight:400;transition:0.44s ease all}.c-jhvpAX{font-size:var(--fontSizes-small);writing-mode:vertical-rl;text-orientation:mixed;color:var(--colors-mauve9);font-weight:400;margin-bottom:0;transition:0.44s ease all;cursor:pointer}.c-jhvpAX:hover{text-decoration:underline;transition:0.44s ease all;text-decoration-color:var(--colors-gray8)}.c-gFjXbG{padding:0.8em;margin-left:-0.8em;border-radius:12px;margin-top:5px;display:flex;flex-direction:row;align-items:flex-start;transition:0.6s ease;border:1px solid transparent}@media (max-width: 640px){.c-gFjXbG .readTime2{display:none}}@media (max-width: 640px){.c-gFjXbG .readTime1{display:inline-flex}}@media (min-width: 1024px){.c-gFjXbG .readTime2{display:none}}@media (min-width: 1024px){.c-gFjXbG .readTime1{display:inline-flex}}@media (max-width: 480px){.c-gFjXbG .readTime1{display:none}}@media (max-width: 480px){.c-gFjXbG .readTime2{display:inline-flex}}.c-gFjXbG:hover{background:var(--colors-grayA2);border:1px solid var(--colors-mauve4);-webkit-user-select:none;user-select:none;cursor:default}.c-gFjXbG:hover .c-kVBWyI{color:var(--colors-text)}.c-gFjXbG:hover .c-bBtURC{transition:0.4s ease all;visibility:visible;opacity:1}.c-kVBWyI{text-decoration:none;font-size:var(--fontSizes-small);color:var(--colors-gray12);cursor:pointer;font-weight:300;transition:0.46s ease all}.c-bBtURC{display:inline-flex;flex-direction:row;align-items:center;width:auto;color:var(--colors-gray10);border-radius:8px;transition:0.6s ease all;font-weight:300;font-size:var(--fontSizes-x-small);opacity:0}.c-kKedsK{margin:0;margin-top:5px;margin-bottom:0px;font-size:var(--fontSizes-small);color:var(--colors-gray11);font-weight:300;transition:0.46s ease all}.c-tpQqR{display:flex;align-items:center;font-size:var(--fontSizes-small);color:var(--colors-gray12);font-weight:300;transition:0.46s ease all}.c-KuLXq{display:flex;align-items:center;cursor:pointer;font-size:var(--fontSizes-small);color:var(--colors-mauve9);font-weight:400;transition:0.44s ease all}.c-hacVvm{border-top:1px solid var(--colors-mauve4)}.c-iMaIpw{-webkit-user-select:none;user-select:none;font-size:var(--fontSizes-x-small);color:var(--colors-gray11);font-weight:300;margin-bottom:0;transition:0.46s ease all}.c-gxctDW{font-size:var(--fontSizes-small);font-weight:300;color:var(--colors-gray12);cursor:default;margin-top:.5em}.c-iEPeBV{border-width:0;border-top-width:1px;border-top:1px solid var(--colors-mauve5)}.c-jvNnTq{font-weight:300;font-size:medium}.c-gEVoXa{font-weight:300;line-height:1.5}.c-iIPFaW{font-size:var(--fontSizes-medium);font-weight:300}.c-kdQMfJ{font-family:inherit;font-size:var(--fontSizes-smaller);line-height:1.5;background:var(--colors-grayA3);border:1px solid var(--colors-mauve7);padding:0px 2px;border-radius:4px;white-space:nowrap}.c-jZaZAh{position:relative;margin-top:1px;margin-bottom:3px;transition:all 200ms ease-in 0s;border:1px solid var(--colors-gray5);border-top-left-radius:12px;border-top-right-radius:12px;border-bottom-left-radius:12px;border-bottom-right-radius:12px;overflow:hidden}.c-iTsYfy{position:relative;background:var(--colors-grayA1);color:var(--colors-mauve11);padding:5px 10px;font-size:small;border-bottom:1px solid var(--colors-gray5)}.c-dQEzcz{font-family:Arial, Helvetica, sans-serif;font-size:small;outline-offset:2px;overflow-x:auto;margin:0;padding-top:20px;padding-bottom:20px;min-height:50px;border-bottom-left-radius:12px;border-bottom-right-radius:12px;max-width:100vw}.c-doStKE{padding-left:20px;padding-bottom:2px;line-height:1;font-size:small}.c-doStKE.highlight-line{width:100%;background-color:var(--colors-grayA2)}.c-gwjoON{font-size:smaller}.c-dITznf{font-weight:300}.c-hPgLaG{text-decoration:underline;font-size:var(--fontSizes-small);color:var(--colors-mauve12)}.c-idZnoe{display:flex;flex-direction:row;align-items:center;justify-content:space-between;cursor:pointer;transition:0.4s ease all;margin-top:1em;margin-bottom:1em;float:right;color:var(--colors-mauve11);height:30px;border-radius:8px;padding:0 10px;background:var(--colors-mauve2);border:1px solid var(--colors-mauve3)}.c-idZnoe:hover{background:var(--colors-mauve3);color:var(--colors-text);transform:translate(0px, 5px)}}--sxs{--sxs:6 c-jUZsbQ-ifvayZa-css c-kVBWyI-iiAvaAQ-css c-ebqfxQ-idSUAGT-css c-gxctDW-igsmDXe-css c-jvNnTq-iiuJnNJ-css c-jvNnTq-ieJNzAD-css c-jvNnTq-iifoIIo-css}@media{.c-jUZsbQ-ifvayZa-css{margin-top:0}.c-kVBWyI-iiAvaAQ-css{margin-right:5px}.c-ebqfxQ-idSUAGT-css{cursor:pointer;display:inline}.c-gxctDW-igsmDXe-css{cursor:pointer}.c-jvNnTq-iiuJnNJ-css{display:flex;align-items:center;color:var(--colors-mauve11);cursor:pointer;font-size:small}.c-jvNnTq-ieJNzAD-css{font-size:small;color:var(--colors-mauve11)}.c-jvNnTq-iifoIIo-css{font-size:var(--fontSizes-large);font-weight:400;margin-top:2px}}</style><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Data fetching in React with SWR</title><meta name="author" content="Felix Tran"/><meta name="description" ccontent="A guide through remote data fetching in React with SWR hooks."/><meta property="og:description" content="A guide through remote data fetching in React with SWR hooks."/><meta property="og:image"/><meta name="next-head-count" content="7"/><link rel="preload" href="/_next/static/css/ef46db3751d8e999.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ef46db3751d8e999.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-49b6f2937c9ce9f4.js" defer=""></script><script src="/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/_next/static/chunks/main-e47bb435dabe4202.js" defer=""></script><script src="/_next/static/chunks/pages/_app-cb9bb9270a99cfc6.js" defer=""></script><script src="/_next/static/chunks/78e521c3-2f57eb8e8c83f996.js" defer=""></script><script src="/_next/static/chunks/831-32ffdcb6f16966c6.js" defer=""></script><script src="/_next/static/chunks/715-b24d9a9286adbc66.js" defer=""></script><script src="/_next/static/chunks/675-7fcdd6e065e9b2ba.js" defer=""></script><script src="/_next/static/chunks/198-83dad13dd612eb38.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-0192fbd0a8d0d0ae.js" defer=""></script><script src="/_next/static/ZM-OxfxlK6U63EmP0APjj/_buildManifest.js" defer=""></script><script src="/_next/static/ZM-OxfxlK6U63EmP0APjj/_ssgManifest.js" defer=""></script><script src="/_next/static/ZM-OxfxlK6U63EmP0APjj/_middlewareManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.3"></style><style data-href="https://fonts.googleapis.com/css2?family=Libre+Franklin:wght@300;400;500&display=swap">@font-face{font-family:'Libre Franklin';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/librefranklin/v12/jizOREVItHgc8qDIbSTKq4XkRg8T88bjFuXOnduhcMWUBA.woff) format('woff')}@font-face{font-family:'Libre Franklin';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/librefranklin/v12/jizOREVItHgc8qDIbSTKq4XkRg8T88bjFuXOnduhLsWUBA.woff) format('woff')}@font-face{font-family:'Libre Franklin';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/librefranklin/v12/jizOREVItHgc8qDIbSTKq4XkRg8T88bjFuXOnduhHMWUBA.woff) format('woff')}@font-face{font-family:'Libre Franklin';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/librefranklin/v12/jizDREVItHgc8qDIbSTKq4XkRiUQ2zcZiVbJsNo.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Libre Franklin';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/librefranklin/v12/jizDREVItHgc8qDIbSTKq4XkRiUR2zcZiVbJsNo.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Libre Franklin';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/librefranklin/v12/jizDREVItHgc8qDIbSTKq4XkRiUf2zcZiVbJ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Libre Franklin';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/librefranklin/v12/jizDREVItHgc8qDIbSTKq4XkRiUQ2zcZiVbJsNo.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Libre Franklin';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/librefranklin/v12/jizDREVItHgc8qDIbSTKq4XkRiUR2zcZiVbJsNo.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Libre Franklin';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/librefranklin/v12/jizDREVItHgc8qDIbSTKq4XkRiUf2zcZiVbJ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Libre Franklin';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/librefranklin/v12/jizDREVItHgc8qDIbSTKq4XkRiUQ2zcZiVbJsNo.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Libre Franklin';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/librefranklin/v12/jizDREVItHgc8qDIbSTKq4XkRiUR2zcZiVbJsNo.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Libre Franklin';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/librefranklin/v12/jizDREVItHgc8qDIbSTKq4XkRiUf2zcZiVbJ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next" data-reactroot=""><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','t-iaQKBC');var e=localStorage.getItem('theme');if('system'===e||(!e&&false)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('t-iaQKBC')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){var x={"light":"light","dark":"t-iaQKBC"};c.add(x[e]|| '')}else{c.add('t-iaQKBC')}if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'dark'}catch(e){}}()</script><main class="c-ihnpJX"><div style="position:relative;flex:1;max-width:min(600px, 90vw)"><div class="c-jVwFOG"><p class="c-itADDb">Felix Tran</p><div class="c-kCtmBT"><div class="c-jBTSoH"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><g><path fill="none" d="M0 0h24v24H0z"></path><path d="M11.38 2.019a7.5 7.5 0 1 0 10.6 10.6C21.662 17.854 17.316 22 12.001 22 6.477 22 2 17.523 2 12c0-5.315 4.146-9.661 9.38-9.981z"></path></g></svg> </div>  </div></div><br/><div style="position:relative;min-width:max(600px, 100vw)"></div><p class="c-jvNnTq c-jvNnTq-iiuJnNJ-css"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><g><path fill="none" d="M0 0h24v24H0z"></path><path d="M5.828 7l2.536 2.536L6.95 10.95 2 6l4.95-4.95 1.414 1.414L5.828 5H13a8 8 0 1 1 0 16H4v-2h9a6 6 0 1 0 0-12H5.828z"></path></g></svg> Go back</p><p class="c-jvNnTq c-jvNnTq-ieJNzAD-css">February 1, 2022</p><p class="c-jvNnTq c-jvNnTq-iifoIIo-css">Data fetching in React with SWR</p><div style="position:relative;margin-top:20px;border-radius:14px;overflow:hidden;width:100%;height:max(260px, 14vw)"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:absolute;top:0;left:0;bottom:0;right:0"><img alt="Data fetching in React with SWR" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="fill" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover"/><noscript><img alt="Data fetching in React with SWR" sizes="100vw" srcSet="https://tphuc.github.io/images/data-fetching-with-swr.png?auto=format&amp;fit=max&amp;w=640 640w, https://tphuc.github.io/images/data-fetching-with-swr.png?auto=format&amp;fit=max&amp;w=750 750w, https://tphuc.github.io/images/data-fetching-with-swr.png?auto=format&amp;fit=max&amp;w=828 828w, https://tphuc.github.io/images/data-fetching-with-swr.png?auto=format&amp;fit=max&amp;w=1080 1080w, https://tphuc.github.io/images/data-fetching-with-swr.png?auto=format&amp;fit=max&amp;w=1200 1200w, https://tphuc.github.io/images/data-fetching-with-swr.png?auto=format&amp;fit=max&amp;w=1920 1920w, https://tphuc.github.io/images/data-fetching-with-swr.png?auto=format&amp;fit=max&amp;w=2048 2048w, https://tphuc.github.io/images/data-fetching-with-swr.png?auto=format&amp;fit=max&amp;w=3840 3840w" src="https://tphuc.github.io/images/data-fetching-with-swr.png?auto=format&amp;fit=max&amp;w=3840" decoding="async" data-nimg="fill" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div><p class="c-gEVoXa">Fetching data is common task in every web application, basically you retrieve some information from your server to update some part of the UI of your webpage without having to reload the whole page.
Today we will have a look at SWR - a react hook library for data fetching in React.</p><h2 class="c-iIPFaW">Problem Without SWR</h2><p class="c-gEVoXa">Traditionally, this is how you do fetching data inside a React component in the most basic form.
For this example, we have a function <code class="c-kdQMfJ">fetchDogs</code> that retrieves a list of all <code class="c-kdQMfJ">dogs</code> from server and we want display it.</p><div class="c-jZaZAh"><div class="c-iTsYfy">jsx</div><pre class="c-dQEzcz prism-code language-jsx" style="font-family:var(--font-family-syntax);font-size:16px"><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token keyword" style="color:#323E7D">import</span><span class="c-gwjoON token plain"> List </span><span class="c-gwjoON token keyword" style="color:#323E7D">from</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token string" style="color:#853e64">&#x27;components/List&#x27;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain" style="display:inline-block">
</span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain" style="display:inline-block">
</span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain"></span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function-variable function" style="color:#587EA8">Screen</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=&gt;</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">[</span><span class="c-gwjoON token plain">dogs</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> setDogs</span><span class="c-gwjoON token punctuation" style="color:#587EA8">]</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> React</span><span class="c-gwjoON token punctuation" style="color:#587EA8">.</span><span class="c-gwjoON token function" style="color:#587EA8">useState</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span></div><div class="c-doStKE token-line highlight-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function-variable function" style="color:#587EA8">fetchDogs</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token keyword" style="color:#323E7D">async</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=&gt;</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line highlight-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token comment" style="color:#7f8c98;font-style:italic">// fetch from the server and update the state</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line highlight-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token keyword" style="color:#323E7D">let</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"> data </span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token keyword" style="color:#323E7D">await</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function" style="color:#587EA8">fetch</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token template-string template-punctuation string" style="color:#853e64">`</span><span class="c-gwjoON token template-string string" style="color:#853e64">/all-dogs</span><span class="c-gwjoON token template-string template-punctuation string" style="color:#853e64">`</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">.</span><span class="c-gwjoON token function" style="color:#587EA8">then</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token parameter">r</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=&gt;</span><span class="c-gwjoON token plain"> r</span><span class="c-gwjoON token punctuation" style="color:#587EA8">.</span><span class="c-gwjoON token function" style="color:#587EA8">json</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line highlight-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token function" style="color:#587EA8">setDogs</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token plain">data</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line highlight-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain" style="display:inline-block">
</span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token comment" style="color:#7f8c98;font-style:italic">// runs after first render</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    React</span><span class="c-gwjoON token punctuation" style="color:#587EA8">.</span><span class="c-gwjoON token function" style="color:#587EA8">useEffect</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=&gt;</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line highlight-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token function" style="color:#587EA8">fetchDogs</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">[</span><span class="c-gwjoON token punctuation" style="color:#587EA8">]</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain" style="display:inline-block">
</span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">return</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&lt;</span><span class="c-gwjoON token tag" style="color:#323E7D">div</span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&gt;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">            </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&lt;</span><span class="c-gwjoON token tag class-name" style="color:#587EA8">List</span><span class="c-gwjoON token tag" style="color:#323E7D"> </span><span class="c-gwjoON token tag attr-name" style="color:#B73999;font-style:italic">data</span><span class="c-gwjoON token tag script language-javascript script-punctuation punctuation" style="color:#587EA8">=</span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token tag script language-javascript" style="color:#323E7D">dogs</span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token tag" style="color:#323E7D"> </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&gt;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&lt;/</span><span class="c-gwjoON token tag" style="color:#323E7D">div</span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&gt;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain"></span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"></span></div></pre></div><p class="c-gEVoXa">Now we want to improve the UX a little bit, add some loading indicator during fetching.
We create new variable state holds boolean value which indicates the loading state (true/false)</p><div class="c-jZaZAh"><div class="c-iTsYfy">jsx</div><pre class="c-dQEzcz prism-code language-jsx" style="font-family:var(--font-family-syntax);font-size:16px"><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token keyword" style="color:#323E7D">import</span><span class="c-gwjoON token plain"> List </span><span class="c-gwjoON token keyword" style="color:#323E7D">from</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token string" style="color:#853e64">&#x27;components/List&#x27;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain" style="display:inline-block">
</span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain"></span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function-variable function" style="color:#587EA8">Screen</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=&gt;</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">[</span><span class="c-gwjoON token plain">dogs</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> setDogs</span><span class="c-gwjoON token punctuation" style="color:#587EA8">]</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> React</span><span class="c-gwjoON token punctuation" style="color:#587EA8">.</span><span class="c-gwjoON token function" style="color:#587EA8">useState</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line highlight-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">[</span><span class="c-gwjoON token plain">loading</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> setLoading</span><span class="c-gwjoON token punctuation" style="color:#587EA8">]</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> React</span><span class="c-gwjoON token punctuation" style="color:#587EA8">.</span><span class="c-gwjoON token function" style="color:#587EA8">useState</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token boolean" style="color:rgb(255, 88, 116)">false</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">;</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token comment" style="color:#7f8c98;font-style:italic">// initial = false</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain" style="display:inline-block">
</span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function-variable function" style="color:#587EA8">fetchDogs</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token keyword" style="color:#323E7D">async</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=&gt;</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line highlight-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token function" style="color:#587EA8">setLoading</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token boolean" style="color:rgb(255, 88, 116)">true</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">;</span><span class="c-gwjoON token plain">  </span><span class="c-gwjoON token comment" style="color:#7f8c98;font-style:italic">// before fetching</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token keyword" style="color:#323E7D">let</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"> data </span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token keyword" style="color:#323E7D">await</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function" style="color:#587EA8">fetch</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token template-string template-punctuation string" style="color:#853e64">`</span><span class="c-gwjoON token template-string string" style="color:#853e64">/all-dogs</span><span class="c-gwjoON token template-string template-punctuation string" style="color:#853e64">`</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">.</span><span class="c-gwjoON token function" style="color:#587EA8">then</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token parameter">r</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=&gt;</span><span class="c-gwjoON token plain"> r</span><span class="c-gwjoON token punctuation" style="color:#587EA8">.</span><span class="c-gwjoON token function" style="color:#587EA8">json</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token function" style="color:#587EA8">setDogs</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token plain">data</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line highlight-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token function" style="color:#587EA8">setLoading</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token boolean" style="color:rgb(255, 88, 116)">false</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">;</span><span class="c-gwjoON token plain">  </span><span class="c-gwjoON token comment" style="color:#7f8c98;font-style:italic">// finish fetching</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain" style="display:inline-block">
</span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token comment" style="color:#7f8c98;font-style:italic">// runs after first render</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    React</span><span class="c-gwjoON token punctuation" style="color:#587EA8">.</span><span class="c-gwjoON token function" style="color:#587EA8">useEffect</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=&gt;</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token function" style="color:#587EA8">fetchDogs</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">[</span><span class="c-gwjoON token punctuation" style="color:#587EA8">]</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain" style="display:inline-block">
</span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">return</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&lt;</span><span class="c-gwjoON token tag" style="color:#323E7D">div</span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&gt;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line highlight-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">            </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain">loading </span><span class="c-gwjoON token operator" style="color:#323E7D">?</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token string" style="color:#853e64">&#x27;fetching dogs...&#x27;</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">:</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&lt;</span><span class="c-gwjoON token tag class-name" style="color:#587EA8">List</span><span class="c-gwjoON token tag" style="color:#323E7D"> </span><span class="c-gwjoON token tag attr-name" style="color:#B73999;font-style:italic">data</span><span class="c-gwjoON token tag script language-javascript script-punctuation punctuation" style="color:#587EA8">=</span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token tag script language-javascript" style="color:#323E7D">dogs</span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token tag" style="color:#323E7D"> </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&gt;</span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&lt;/</span><span class="c-gwjoON token tag" style="color:#323E7D">div</span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&gt;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain"></span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"></span></div></pre></div><p class="c-gEVoXa">What if an error occured during fetching <code class="c-kdQMfJ">fetchAllDogs()</code> and we want to display the error message returned by the server.</p><div class="c-jZaZAh"><div class="c-iTsYfy">jsx</div><pre class="c-dQEzcz prism-code language-jsx" style="font-family:var(--font-family-syntax);font-size:16px"><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token keyword" style="color:#323E7D">import</span><span class="c-gwjoON token plain"> List </span><span class="c-gwjoON token keyword" style="color:#323E7D">from</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token string" style="color:#853e64">&#x27;components/List&#x27;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain" style="display:inline-block">
</span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain"></span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function-variable function" style="color:#587EA8">Screen</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=&gt;</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">[</span><span class="c-gwjoON token plain">dogs</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> setDogs</span><span class="c-gwjoON token punctuation" style="color:#587EA8">]</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> React</span><span class="c-gwjoON token punctuation" style="color:#587EA8">.</span><span class="c-gwjoON token function" style="color:#587EA8">useState</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">[</span><span class="c-gwjoON token plain">loading</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> setLoading</span><span class="c-gwjoON token punctuation" style="color:#587EA8">]</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> React</span><span class="c-gwjoON token punctuation" style="color:#587EA8">.</span><span class="c-gwjoON token function" style="color:#587EA8">useState</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token boolean" style="color:rgb(255, 88, 116)">false</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">;</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token comment" style="color:#7f8c98;font-style:italic">// initial = false</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line highlight-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">[</span><span class="c-gwjoON token plain">errMsg</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> setErrMsg</span><span class="c-gwjoON token punctuation" style="color:#587EA8">]</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> React</span><span class="c-gwjoON token punctuation" style="color:#587EA8">.</span><span class="c-gwjoON token function" style="color:#587EA8">useState</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token string" style="color:#853e64">&quot;&quot;</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain" style="display:inline-block">
</span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function-variable function" style="color:#587EA8">fetchDogs</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token keyword" style="color:#323E7D">async</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=&gt;</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token function" style="color:#587EA8">setLoading</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token boolean" style="color:rgb(255, 88, 116)">true</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">;</span><span class="c-gwjoON token plain">  </span><span class="c-gwjoON token comment" style="color:#7f8c98;font-style:italic">// before fetching</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token keyword" style="color:#323E7D">try</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">            </span><span class="c-gwjoON token keyword" style="color:#323E7D">let</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"> data </span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token keyword" style="color:#323E7D">await</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function" style="color:#587EA8">fetch</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token template-string template-punctuation string" style="color:#853e64">`</span><span class="c-gwjoON token template-string string" style="color:#853e64">/all-dogs</span><span class="c-gwjoON token template-string template-punctuation string" style="color:#853e64">`</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">.</span><span class="c-gwjoON token function" style="color:#587EA8">then</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token parameter">r</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=&gt;</span><span class="c-gwjoON token plain"> r</span><span class="c-gwjoON token punctuation" style="color:#587EA8">.</span><span class="c-gwjoON token function" style="color:#587EA8">json</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line highlight-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">            </span><span class="c-gwjoON token function" style="color:#587EA8">setDogs</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token plain">data</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token keyword" style="color:#323E7D">catch</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token plain">err</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">            </span><span class="c-gwjoON token function" style="color:#587EA8">setErrMsg</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token plain">err</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token function" style="color:#587EA8">setLoading</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token boolean" style="color:rgb(255, 88, 116)">false</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">;</span><span class="c-gwjoON token plain">  </span><span class="c-gwjoON token comment" style="color:#7f8c98;font-style:italic">// finish fetching</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain" style="display:inline-block">
</span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token comment" style="color:#7f8c98;font-style:italic">// runs after first render</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    React</span><span class="c-gwjoON token punctuation" style="color:#587EA8">.</span><span class="c-gwjoON token function" style="color:#587EA8">useEffect</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=&gt;</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token function" style="color:#587EA8">fetchDogs</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">[</span><span class="c-gwjoON token punctuation" style="color:#587EA8">]</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain" style="display:inline-block">
</span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">return</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&lt;</span><span class="c-gwjoON token tag" style="color:#323E7D">div</span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&gt;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line highlight-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">            </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain">errMsg </span><span class="c-gwjoON token operator" style="color:#323E7D">?</span><span class="c-gwjoON token plain"> errMsg </span><span class="c-gwjoON token operator" style="color:#323E7D">:</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token plain">loading </span><span class="c-gwjoON token operator" style="color:#323E7D">?</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token string" style="color:#853e64">&#x27;fetching dogs...&#x27;</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">:</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&lt;</span><span class="c-gwjoON token tag class-name" style="color:#587EA8">List</span><span class="c-gwjoON token tag" style="color:#323E7D"> </span><span class="c-gwjoON token tag attr-name" style="color:#B73999;font-style:italic">data</span><span class="c-gwjoON token tag script language-javascript script-punctuation punctuation" style="color:#587EA8">=</span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token tag script language-javascript" style="color:#323E7D">dogs</span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token tag" style="color:#323E7D"> </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&gt;</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&lt;/</span><span class="c-gwjoON token tag" style="color:#323E7D">div</span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&gt;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain"></span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"></span></div></pre></div><p class="c-gEVoXa">Now consider this</p><ul><li class="c-dITznf"><p class="c-gEVoXa">What if you screen want to display the <code class="c-kdQMfJ">cats</code> not just only <code class="c-kdQMfJ">dogs</code>, do we have to go through the same process and create more <code class="c-kdQMfJ">useState</code> variables as well ?</p><div class="c-jZaZAh"><div class="c-iTsYfy">jsx</div><pre class="c-dQEzcz prism-code language-jsx" style="font-family:var(--font-family-syntax);font-size:16px"><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token operator" style="color:#323E7D">...</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&lt;</span><span class="c-gwjoON token tag class-name" style="color:#587EA8">List</span><span class="c-gwjoON token tag" style="color:#323E7D"> </span><span class="c-gwjoON token tag attr-name" style="color:#B73999;font-style:italic">data</span><span class="c-gwjoON token tag script language-javascript script-punctuation punctuation" style="color:#587EA8">=</span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token tag script language-javascript" style="color:#323E7D">dogs</span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token tag" style="color:#323E7D"> </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&gt;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&lt;</span><span class="c-gwjoON token tag class-name" style="color:#587EA8">List</span><span class="c-gwjoON token tag" style="color:#323E7D"> </span><span class="c-gwjoON token tag attr-name" style="color:#B73999;font-style:italic">data</span><span class="c-gwjoON token tag script language-javascript script-punctuation punctuation" style="color:#587EA8">=</span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token tag script language-javascript" style="color:#323E7D">cats</span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token tag" style="color:#323E7D"> </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&gt;</span><span class="c-gwjoON token plain"></span></div></pre></div></li><li class="c-dITznf"><p class="c-gEVoXa">What if you have another <code class="c-kdQMfJ">ScreenB</code> that wants to display the <code class="c-kdQMfJ">dogs</code> as well, do we have to write all the same code over again ?</p><div class="c-jZaZAh"><div class="c-iTsYfy">jsx</div><pre class="c-dQEzcz prism-code language-jsx" style="font-family:var(--font-family-syntax);font-size:16px"><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function-variable function" style="color:#587EA8">ScreenA</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=&gt;</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token operator" style="color:#323E7D">...</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token keyword" style="color:#323E7D">return</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&lt;</span><span class="c-gwjoON token tag class-name" style="color:#587EA8">List</span><span class="c-gwjoON token tag" style="color:#323E7D"> </span><span class="c-gwjoON token tag attr-name" style="color:#B73999;font-style:italic">data</span><span class="c-gwjoON token tag script language-javascript script-punctuation punctuation" style="color:#587EA8">=</span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token tag script language-javascript" style="color:#323E7D">dogs</span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token tag" style="color:#323E7D"> </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">/&gt;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain" style="display:inline-block">
</span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function-variable function" style="color:#587EA8">ScreenB</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=&gt;</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token operator" style="color:#323E7D">...</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token keyword" style="color:#323E7D">return</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&lt;</span><span class="c-gwjoON token tag class-name" style="color:#587EA8">List</span><span class="c-gwjoON token tag" style="color:#323E7D"> </span><span class="c-gwjoON token tag attr-name" style="color:#B73999;font-style:italic">data</span><span class="c-gwjoON token tag script language-javascript script-punctuation punctuation" style="color:#587EA8">=</span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token tag script language-javascript" style="color:#323E7D">dogs</span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token tag" style="color:#323E7D"> </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">/&gt;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"></span></div></pre></div></li></ul><p class="c-gEVoXa">Eventually our code is a bunch of mess! What is the solution for this ?</p><h2 class="c-iIPFaW">With SWR hook</h2><p class="c-gEVoXa">What we want is to actually move all of the fetching code with the states variable into a hook function. Click <a href="https://reactjs.org/docs/hooks-overview.html" class="c-hPgLaG">here</a> if you want to read more about React Hooks. </p><div class="c-jZaZAh"><div class="c-iTsYfy">jsx</div><pre class="c-dQEzcz prism-code language-jsx" style="font-family:var(--font-family-syntax);font-size:16px"><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain">data</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> loading</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> errMsg </span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function" style="color:#587EA8">useDogs</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">;</span><span class="c-gwjoON token plain"></span></div></pre></div><p class="c-gEVoXa">We will use <code class="c-kdQMfJ">swr</code> to implement the function <code class="c-kdQMfJ">useDogs</code>. Firstly install <code class="c-kdQMfJ">swr</code> via <code class="c-kdQMfJ">yarn add swr</code> or <code class="c-kdQMfJ">npm install swr</code>.
For best practices, we will create the function in another file and export it out.</p><div class="c-jZaZAh"><div class="c-iTsYfy">swr/use-dogs.js</div><pre class="c-dQEzcz prism-code language-jsx" style="font-family:var(--font-family-syntax);font-size:16px"><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token keyword" style="color:#323E7D">import</span><span class="c-gwjoON token plain"> useSWR </span><span class="c-gwjoON token keyword" style="color:#323E7D">from</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token string" style="color:#853e64">&#x27;swr&#x27;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain" style="display:inline-block">
</span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain"></span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function-variable function" style="color:#587EA8">fetcher</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token keyword" style="color:#323E7D">async</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token parameter">url</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=&gt;</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"> data </span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token keyword" style="color:#323E7D">await</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function" style="color:#587EA8">fetch</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token plain">url</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">.</span><span class="c-gwjoON token function" style="color:#587EA8">then</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token parameter">r</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=&gt;</span><span class="c-gwjoON token plain"> r</span><span class="c-gwjoON token punctuation" style="color:#587EA8">.</span><span class="c-gwjoON token function" style="color:#587EA8">json</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">return</span><span class="c-gwjoON token plain"> data</span><span class="c-gwjoON token punctuation" style="color:#587EA8">;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain"></span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain" style="display:inline-block">
</span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain"></span><span class="c-gwjoON token keyword" style="color:#323E7D">export</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token keyword" style="color:#323E7D">default</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token keyword" style="color:#323E7D">function</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function" style="color:#587EA8">useDogs</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"> data</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> error</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> mutate </span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function" style="color:#587EA8">useSWR</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token string" style="color:#853e64">&#x27;/get-dogs&#x27;</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> fetcher</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain" style="display:inline-block">
</span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">return</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        data</span><span class="c-gwjoON token operator" style="color:#323E7D">:</span><span class="c-gwjoON token plain"> data</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        loading</span><span class="c-gwjoON token operator" style="color:#323E7D">:</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">!</span><span class="c-gwjoON token plain">error </span><span class="c-gwjoON token operator" style="color:#323E7D">&amp;&amp;</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">!</span><span class="c-gwjoON token plain">data</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        errMsg</span><span class="c-gwjoON token operator" style="color:#323E7D">:</span><span class="c-gwjoON token plain"> error</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        mutate</span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain"></span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"></span></div></pre></div><p class="c-gEVoXa">This function is pretty straight forward. Let&#x27;s me explain:</p><ul><li class="c-dITznf">First param of <code class="c-kdQMfJ">useSWR</code> will be the arguments of <code class="c-kdQMfJ">fetcher</code>.<div class="c-jZaZAh"><div class="c-iTsYfy">js</div><pre class="c-dQEzcz prism-code language-js" style="font-family:var(--font-family-syntax);font-size:16px"><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token comment" style="color:#7f8c98;font-style:italic">// this is equivalent</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"> data</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> error</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> mutate </span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function" style="color:#587EA8">useSWR</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">[</span><span class="c-gwjoON token string" style="color:#853e64">&#x27;/get-dogs&#x27;</span><span class="c-gwjoON token punctuation" style="color:#587EA8">]</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> </span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token parameter">url</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token arrow operator" style="color:#323E7D">=&gt;</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function" style="color:#587EA8">fetch</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token plain">url</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">.</span><span class="c-gwjoON token method function property-access" style="color:#587EA8">then</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token parameter">r</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token arrow operator" style="color:#323E7D">=&gt;</span><span class="c-gwjoON token plain"> r</span><span class="c-gwjoON token punctuation" style="color:#587EA8">.</span><span class="c-gwjoON token method function property-access" style="color:#587EA8">json</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"></span></div></pre></div></li><li class="c-dITznf">SWR automatically do the error handling for us. If an error is thrown inside <code class="c-kdQMfJ">fetcher</code>, it will be returned as error by the hook.</li><li class="c-dITznf">If you want to pass in multiple arguments<div class="c-jZaZAh"><div class="c-iTsYfy">js</div><pre class="c-dQEzcz prism-code language-js" style="font-family:var(--font-family-syntax);font-size:16px"><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"> data</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> error</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> mutate </span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function" style="color:#587EA8">useSWR</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">[</span><span class="c-gwjoON token string" style="color:#853e64">&#x27;/get-dogs&#x27;</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token number" style="color:rgb(247, 140, 108)">1</span><span class="c-gwjoON token punctuation" style="color:#587EA8">]</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> </span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token comment" style="color:#7f8c98;font-style:italic">// fetch from /get-dogs/1</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token parameter">url</span><span class="c-gwjoON token parameter punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token parameter"> id</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token arrow operator" style="color:#323E7D">=&gt;</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function" style="color:#587EA8">fetch</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token plain">url </span><span class="c-gwjoON token operator" style="color:#323E7D">+</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token template-string template-punctuation string" style="color:#853e64">`</span><span class="c-gwjoON token template-string string" style="color:#853e64">/</span><span class="c-gwjoON token template-string interpolation interpolation-punctuation punctuation" style="color:#587EA8">${</span><span class="c-gwjoON token template-string interpolation">id</span><span class="c-gwjoON token template-string interpolation interpolation-punctuation punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token template-string template-punctuation string" style="color:#853e64">`</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">.</span><span class="c-gwjoON token method function property-access" style="color:#587EA8">then</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token parameter">r</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token arrow operator" style="color:#323E7D">=&gt;</span><span class="c-gwjoON token plain"> r</span><span class="c-gwjoON token punctuation" style="color:#587EA8">.</span><span class="c-gwjoON token method function property-access" style="color:#587EA8">json</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"></span></div></pre></div></li></ul><p class="c-gEVoXa">Now we have the <code class="c-kdQMfJ">useDogs</code> hooks with <code class="c-kdQMfJ">swr</code>, let&#x27;s rewrite our <code class="c-kdQMfJ">Screen</code>.</p><div class="c-jZaZAh"><div class="c-iTsYfy">jsx</div><pre class="c-dQEzcz prism-code language-jsx" style="font-family:var(--font-family-syntax);font-size:16px"><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token keyword" style="color:#323E7D">import</span><span class="c-gwjoON token plain"> useDogs </span><span class="c-gwjoON token keyword" style="color:#323E7D">from</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token string" style="color:#853e64">&#x27;swr/use-dogs&#x27;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain"></span><span class="c-gwjoON token keyword" style="color:#323E7D">import</span><span class="c-gwjoON token plain"> List </span><span class="c-gwjoON token keyword" style="color:#323E7D">from</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token string" style="color:#853e64">&#x27;componets/List&#x27;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain" style="display:inline-block">
</span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain"></span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function-variable function" style="color:#587EA8">Screen</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=&gt;</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"> data</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> loading</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> errMsg</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> mutate </span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function" style="color:#587EA8">useDogs</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">return</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&lt;</span><span class="c-gwjoON token tag" style="color:#323E7D">div</span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&gt;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">            </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain">loading </span><span class="c-gwjoON token operator" style="color:#323E7D">&amp;&amp;</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token string" style="color:#853e64">&#x27;loading...&#x27;</span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">            </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain">errMsg </span><span class="c-gwjoON token operator" style="color:#323E7D">&amp;&amp;</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token template-string template-punctuation string" style="color:#853e64">`</span><span class="c-gwjoON token template-string string" style="color:#853e64">an error occured: </span><span class="c-gwjoON token template-string interpolation interpolation-punctuation punctuation" style="color:#587EA8">${</span><span class="c-gwjoON token template-string interpolation">errMsg</span><span class="c-gwjoON token template-string interpolation interpolation-punctuation punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token template-string template-punctuation string" style="color:#853e64">`</span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">            </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain">data </span><span class="c-gwjoON token operator" style="color:#323E7D">&amp;&amp;</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&lt;</span><span class="c-gwjoON token tag class-name" style="color:#587EA8">List</span><span class="c-gwjoON token tag" style="color:#323E7D"> </span><span class="c-gwjoON token tag attr-name" style="color:#B73999;font-style:italic">data</span><span class="c-gwjoON token tag script language-javascript script-punctuation punctuation" style="color:#587EA8">=</span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token tag script language-javascript" style="color:#323E7D">data</span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token tag" style="color:#323E7D"> </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&gt;</span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&lt;/</span><span class="c-gwjoON token tag" style="color:#323E7D">div</span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&gt;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain"></span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain" style="display:inline-block">
</span></div></pre></div><p class="c-gEVoXa">As you may have noticed our function hook returns more than just data, loading and error, it also returns <code class="c-kdQMfJ">mutate</code>. What is <code class="c-kdQMfJ">mutate</code>?
<a href="https://swr.vercel.app/docs/mutation" class="c-hPgLaG"><code class="c-kdQMfJ">mutate</code></a> is a special function can update your local data programmatically, while revalidating and finally replace it with the latest data. For example you may want to refetch the data after certain actions. Let&#x27;s create a button that trigger refetching:</p><div class="c-jZaZAh"><div class="c-iTsYfy">jsx</div><pre class="c-dQEzcz prism-code language-jsx" style="font-family:var(--font-family-syntax);font-size:16px"><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token operator" style="color:#323E7D">...</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain"></span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function-variable function" style="color:#587EA8">Screen</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=&gt;</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"> data</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> mutate </span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function" style="color:#587EA8">useDogs</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">return</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&lt;</span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&gt;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&lt;</span><span class="c-gwjoON token tag class-name" style="color:#587EA8">List</span><span class="c-gwjoON token tag" style="color:#323E7D"> </span><span class="c-gwjoON token tag attr-name" style="color:#B73999;font-style:italic">data</span><span class="c-gwjoON token tag script language-javascript script-punctuation punctuation" style="color:#587EA8">=</span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token tag script language-javascript" style="color:#323E7D">data</span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&gt;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&lt;</span><span class="c-gwjoON token tag" style="color:#323E7D">button</span><span class="c-gwjoON token tag" style="color:#323E7D"> </span><span class="c-gwjoON token tag attr-name" style="color:#B73999;font-style:italic">onClick</span><span class="c-gwjoON token tag script language-javascript script-punctuation punctuation" style="color:#587EA8">=</span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token tag script language-javascript" style="color:#323E7D"> </span><span class="c-gwjoON token tag script language-javascript operator" style="color:#323E7D">=&gt;</span><span class="c-gwjoON token tag script language-javascript" style="color:#323E7D"> </span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token tag script language-javascript" style="color:#323E7D"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token tag script language-javascript" style="color:#323E7D">            </span><span class="c-gwjoON token tag script language-javascript function" style="color:#587EA8">mutate</span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token tag script language-javascript" style="color:#323E7D"> </span><span class="c-gwjoON token tag script language-javascript comment" style="color:#7f8c98;font-style:italic">// refetch the data</span><span class="c-gwjoON token tag script language-javascript" style="color:#323E7D"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token tag script language-javascript" style="color:#323E7D">        </span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&gt;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">            Refetch</span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&lt;/</span><span class="c-gwjoON token tag" style="color:#323E7D">button</span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&gt;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&lt;/</span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&gt;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain"></span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"></span></div></pre></div><p class="c-gEVoXa">Write the hook function once, use anywhere, no need to rewrite all the code again, keeping it clean.</p><div class="c-jZaZAh"><div class="c-iTsYfy">jsx</div><pre class="c-dQEzcz prism-code language-jsx" style="font-family:var(--font-family-syntax);font-size:16px"><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token operator" style="color:#323E7D">...</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain"></span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function-variable function" style="color:#587EA8">ScreenA</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=&gt;</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"> data</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> mutate </span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function" style="color:#587EA8">useDogs</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token operator" style="color:#323E7D">...</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain"></span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain" style="display:inline-block">
</span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain"></span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function-variable function" style="color:#587EA8">ScreenB</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=&gt;</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"> data</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> mutate </span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function" style="color:#587EA8">useDogs</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token operator" style="color:#323E7D">...</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain"></span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"></span></div></pre></div><p class="c-gEVoXa">Write the hook function once, use anywhere, no need to rewrite all the code again, keeping it clean.</p><div class="c-jZaZAh"><div class="c-iTsYfy">jsx</div><pre class="c-dQEzcz prism-code language-jsx" style="font-family:var(--font-family-syntax);font-size:16px"><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token operator" style="color:#323E7D">...</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain"></span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function-variable function" style="color:#587EA8">ScreenA</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=&gt;</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"> data</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> mutate </span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function" style="color:#587EA8">useDogs</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token operator" style="color:#323E7D">...</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain"></span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain" style="display:inline-block">
</span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain"></span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function-variable function" style="color:#587EA8">ScreenB</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=&gt;</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"> data</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> mutate </span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function" style="color:#587EA8">useDogs</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token operator" style="color:#323E7D">...</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain"></span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"></span></div></pre></div><p class="c-gEVoXa">You can rename the unpack values using destructuring assignment syntax.</p><div class="c-jZaZAh"><div class="c-iTsYfy">jsx</div><pre class="c-dQEzcz prism-code language-jsx" style="font-family:var(--font-family-syntax);font-size:16px"><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token operator" style="color:#323E7D">...</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain"></span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function-variable function" style="color:#587EA8">ScreenA</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=&gt;</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"> data</span><span class="c-gwjoON token operator" style="color:#323E7D">:</span><span class="c-gwjoON token plain"> dogs</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> mutate</span><span class="c-gwjoON token operator" style="color:#323E7D">:</span><span class="c-gwjoON token plain"> mutateDogs </span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function" style="color:#587EA8">useDogs</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">const</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token plain"> data</span><span class="c-gwjoON token operator" style="color:#323E7D">:</span><span class="c-gwjoON token plain"> cats</span><span class="c-gwjoON token punctuation" style="color:#587EA8">,</span><span class="c-gwjoON token plain"> mutate</span><span class="c-gwjoON token operator" style="color:#323E7D">:</span><span class="c-gwjoON token plain"> mutateCats </span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token operator" style="color:#323E7D">=</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token function" style="color:#587EA8">useCats</span><span class="c-gwjoON token punctuation" style="color:#587EA8">(</span><span class="c-gwjoON token punctuation" style="color:#587EA8">)</span><span class="c-gwjoON token punctuation" style="color:#587EA8">;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token keyword" style="color:#323E7D">return</span><span class="c-gwjoON token plain"> </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&lt;</span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&gt;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&lt;</span><span class="c-gwjoON token tag class-name" style="color:#587EA8">List</span><span class="c-gwjoON token tag" style="color:#323E7D"> </span><span class="c-gwjoON token tag attr-name" style="color:#B73999;font-style:italic">data</span><span class="c-gwjoON token tag script language-javascript script-punctuation punctuation" style="color:#587EA8">=</span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token tag script language-javascript" style="color:#323E7D">dogs</span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&gt;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">        </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&lt;</span><span class="c-gwjoON token tag class-name" style="color:#587EA8">List</span><span class="c-gwjoON token tag" style="color:#323E7D"> </span><span class="c-gwjoON token tag attr-name" style="color:#B73999;font-style:italic">data</span><span class="c-gwjoON token tag script language-javascript script-punctuation punctuation" style="color:#587EA8">=</span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">{</span><span class="c-gwjoON token tag script language-javascript" style="color:#323E7D">cats</span><span class="c-gwjoON token tag script language-javascript punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&gt;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain">    </span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&lt;/</span><span class="c-gwjoON token tag punctuation" style="color:#587EA8">&gt;</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain"></span><span class="c-gwjoON token punctuation" style="color:#587EA8">}</span><span class="c-gwjoON token plain"></span></div><div class="c-doStKE token-line" style="font-family:var(--font-family-syntax);font-size:16px"><span class="c-gwjoON token plain" style="display:inline-block">
</span></div></pre></div><h2 class="c-iIPFaW">Conclusion</h2><p class="c-gEVoXa">SWR is a great library for data fetching in React, created by the same team behind Next.js, the React framework. It&#x27;s a tool that i always use in every React project. I hope this post has been useful as we walked through some usage examples above.</p><p class="c-gEVoXa">This is just the basic introduction to the library, if you want more information, check out:</p><ul><li class="c-dITznf">Offical document: <a href="https://swr.vercel.app" class="c-hPgLaG">swr.vercel.app</a></li><li class="c-dITznf">Alternatives: <a href="https://react-query.tanstack.com" class="c-hPgLaG">React-query</a></li></ul><div href="/" class="c-idZnoe"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><g><path fill="none" d="M0 0h24v24H0z"></path><path d="M7.828 11H20v2H7.828l5.364 5.364-1.414 1.414L4 12l7.778-7.778 1.414 1.414z"></path></g></svg><span>back to all posts</span> </div></div><br/></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontMatter":{"title":"Data fetching in React with SWR","description":"A guide through remote data fetching in React with SWR hooks.","date":"February 1, 2022","tags":["react","library","hook"],"level":"Intermediate","thumbnail":"images/data-fetching-with-swr.png"},"slug":"data-fetching-in-React","mdxSource":{"compiledSource":"var p=Object.defineProperty,u=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var r=Object.getOwnPropertySymbols;var s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;var l=(t,a,n)=\u003ea in t?p(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,e=(t,a)=\u003e{for(var n in a||(a={}))s.call(a,n)\u0026\u0026l(t,n,a[n]);if(r)for(var n of r(a))i.call(a,n)\u0026\u0026l(t,n,a[n]);return t},c=(t,a)=\u003eu(t,h(a));var d=(t,a)=\u003e{var n={};for(var o in t)s.call(t,o)\u0026\u0026a.indexOf(o)\u003c0\u0026\u0026(n[o]=t[o]);if(t!=null\u0026\u0026r)for(var o of r(t))a.indexOf(o)\u003c0\u0026\u0026i.call(t,o)\u0026\u0026(n[o]=t[o]);return n};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(n){var o=n,{components:t}=o,a=d(o,[\"components\"]);return mdx(MDXLayout,c(e(e({},layoutProps),a),{components:t,mdxType:\"MDXLayout\"}),mdx(\"p\",null,`Fetching data is common task in every web application, basically you retrieve some information from your server to update some part of the UI of your webpage without having to reload the whole page.\nToday we will have a look at SWR - a react hook library for data fetching in React.`),mdx(\"h2\",null,\"Problem Without SWR\"),mdx(\"p\",null,`Traditionally, this is how you do fetching data inside a React component in the most basic form.\nFor this example, we have a function `,mdx(\"inlineCode\",{parentName:\"p\"},\"fetchDogs\"),\" that retrieves a list of all \",mdx(\"inlineCode\",{parentName:\"p\"},\"dogs\"),\" from server and we want display it.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-jsx\",metastring:\"{7-11,15}\",\"{7-11,15}\":!0}),`import List from 'components/List'\n\n\nconst Screen = () =\u003e {\n    const [dogs, setDogs] = React.useState();\n    \n    const fetchDogs = async () =\u003e {\n        // fetch from the server and update the state\n        let { data } = await fetch(\\`/all-dogs\\`).then(r =\u003e r.json());\n        setDogs(data);\n    }\n\n    // runs after first render\n    React.useEffect(() =\u003e {\n        fetchDogs()\n    }, [])\n\n    return (\n        \u003cdiv\u003e\n            \u003cList data={dogs} \u003e\n        \u003c/div\u003e\n    )\n}\n`)),mdx(\"p\",null,`Now we want to improve the UX a little bit, add some loading indicator during fetching.\nWe create new variable state holds boolean value which indicates the loading state (true/false)`),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-jsx\",metastring:\"{5,8,11,21}\",\"{5,8,11,21}\":!0}),`import List from 'components/List'\n\nconst Screen = () =\u003e {\n    const [dogs, setDogs] = React.useState();\n    const [loading, setLoading] = React.useState(false); // initial = false\n\n    const fetchDogs = async () =\u003e {\n        setLoading(true);  // before fetching\n        let { data } = await fetch(\\`/all-dogs\\`).then(r =\u003e r.json()));\n        setDogs(data);\n        setLoading(false);  // finish fetching\n    }\n\n    // runs after first render\n    React.useEffect(() =\u003e {\n        fetchDogs()\n    }, [])\n\n    return (\n        \u003cdiv\u003e\n            {loading ? 'fetching dogs...' : \u003cList data={dogs} \u003e}\n        \u003c/div\u003e\n    )\n}\n`)),mdx(\"p\",null,\"What if an error occured during fetching \",mdx(\"inlineCode\",{parentName:\"p\"},\"fetchAllDogs()\"),\" and we want to display the error message returned by the server.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-jsx\",metastring:\"{6,12,27}\",\"{6,12,27}\":!0}),`import List from 'components/List'\n\nconst Screen = () =\u003e {\n    const [dogs, setDogs] = React.useState();\n    const [loading, setLoading] = React.useState(false); // initial = false\n    const [errMsg, setErrMsg] = React.useState(\"\");\n\n    const fetchDogs = async () =\u003e {\n        setLoading(true);  // before fetching\n        try {\n            let { data } = await fetch(\\`/all-dogs\\`).then(r =\u003e r.json());\n            setDogs(data);\n        }\n        catch(err){\n            setErrMsg(err)\n        }\n        setLoading(false);  // finish fetching\n    }\n\n    // runs after first render\n    React.useEffect(() =\u003e {\n        fetchDogs()\n    }, [])\n\n    return (\n        \u003cdiv\u003e\n            {errMsg ? errMsg : (loading ? 'fetching dogs...' : \u003cList data={dogs} \u003e)}\n        \u003c/div\u003e\n    )\n}\n`)),mdx(\"p\",null,\"Now consider this\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\"},\"What if you screen want to display the \",mdx(\"inlineCode\",{parentName:\"p\"},\"cats\"),\" not just only \",mdx(\"inlineCode\",{parentName:\"p\"},\"dogs\"),\", do we have to go through the same process and create more \",mdx(\"inlineCode\",{parentName:\"p\"},\"useState\"),\" variables as well ?\"),mdx(\"pre\",{parentName:\"li\"},mdx(\"code\",e({parentName:\"pre\"},{className:\"language-jsx\"}),`        ...\n        \u003cList data={dogs} \u003e\n        \u003cList data={cats} \u003e\n`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\"},\"What if you have another \",mdx(\"inlineCode\",{parentName:\"p\"},\"ScreenB\"),\" that wants to display the \",mdx(\"inlineCode\",{parentName:\"p\"},\"dogs\"),\" as well, do we have to write all the same code over again ?\"),mdx(\"pre\",{parentName:\"li\"},mdx(\"code\",e({parentName:\"pre\"},{className:\"language-jsx\"}),`    const ScreenA = () =\u003e {\n        ...\n        return \u003cList data={dogs} /\u003e\n    }\n\n    const ScreenB = () =\u003e {\n        ...\n        return \u003cList data={dogs} /\u003e\n    }\n`)))),mdx(\"p\",null,\"Eventually our code is a bunch of mess! What is the solution for this \\u{1F914}?\"),mdx(\"h2\",null,\"With SWR hook\"),mdx(\"p\",null,\"What we want is to actually move all of the fetching code with the states variable into a hook function. Click \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://reactjs.org/docs/hooks-overview.html\"}),\"here\"),\" if you want to read more about React Hooks. \"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-jsx\"}),`const {data, loading, errMsg } = useDogs();\n`)),mdx(\"p\",null,\"We will use \",mdx(\"inlineCode\",{parentName:\"p\"},\"swr\"),\" to implement the function \",mdx(\"inlineCode\",{parentName:\"p\"},\"useDogs\"),\". Firstly install \",mdx(\"inlineCode\",{parentName:\"p\"},\"swr\"),\" via \",mdx(\"inlineCode\",{parentName:\"p\"},\"yarn add swr\"),\" or \",mdx(\"inlineCode\",{parentName:\"p\"},\"npm install swr\"),`.\nFor best practices, we will create the function in another file and export it out.`),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-jsx\",metastring:\"file=swr/use-dogs.js\",file:\"swr/use-dogs.js\"}),`import useSWR from 'swr'\n\nconst fetcher = async (url) =\u003e {\n    const { data } = await fetch(url).then(r =\u003e r.json());\n    return data;\n}\n\nexport default function useDogs() {\n    const { data, error, mutate } = useSWR('/get-dogs', fetcher)\n\n    return {\n        data: data,\n        loading: !error \u0026\u0026 !data,\n        errMsg: error,\n        mutate\n    }\n}\n`)),mdx(\"p\",null,\"This function is pretty straight forward. Let's me explain:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"First param of \",mdx(\"inlineCode\",{parentName:\"li\"},\"useSWR\"),\" will be the arguments of \",mdx(\"inlineCode\",{parentName:\"li\"},\"fetcher\"),\".\",mdx(\"pre\",{parentName:\"li\"},mdx(\"code\",e({parentName:\"pre\"},{className:\"language-js\"}),`    // this is equivalent\n    const { data, error, mutate } = useSWR(['/get-dogs'], \n        (url) =\u003e fetch(url).then(r =\u003e r.json())\n    )\n`))),mdx(\"li\",{parentName:\"ul\"},\"SWR automatically do the error handling for us. If an error is thrown inside \",mdx(\"inlineCode\",{parentName:\"li\"},\"fetcher\"),\", it will be returned as error by the hook.\"),mdx(\"li\",{parentName:\"ul\"},\"If you want to pass in multiple arguments\",mdx(\"pre\",{parentName:\"li\"},mdx(\"code\",e({parentName:\"pre\"},{className:\"language-js\"}),`    const { data, error, mutate } = useSWR(['/get-dogs', 1], \n        // fetch from /get-dogs/1\n        (url, id) =\u003e fetch(url + \\`/\\${id}\\`).then(r =\u003e r.json())\n    )\n`)))),mdx(\"p\",null,\"Now we have the \",mdx(\"inlineCode\",{parentName:\"p\"},\"useDogs\"),\" hooks with \",mdx(\"inlineCode\",{parentName:\"p\"},\"swr\"),\", let's rewrite our \",mdx(\"inlineCode\",{parentName:\"p\"},\"Screen\"),\".\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-jsx\"}),`import useDogs from 'swr/use-dogs'\nimport List from 'componets/List'\n\nconst Screen = () =\u003e {\n    const { data, loading, errMsg, mutate } = useDogs();\n    return (\n        \u003cdiv\u003e\n            {loading \u0026\u0026 'loading...'}\n            {errMsg \u0026\u0026 \\`an error occured: \\${errMsg}\\`}\n            {data \u0026\u0026 \u003cList data={data} \u003e}\n        \u003c/div\u003e\n    )\n}\n\n`)),mdx(\"p\",null,\"As you may have noticed our function hook returns more than just data, loading and error, it also returns \",mdx(\"inlineCode\",{parentName:\"p\"},\"mutate\"),\". What is \",mdx(\"inlineCode\",{parentName:\"p\"},\"mutate\"),`?\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"https://swr.vercel.app/docs/mutation\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"mutate\")),\" is a special function can update your local data programmatically, while revalidating and finally replace it with the latest data. For example you may want to refetch the data after certain actions. Let's create a button that trigger refetching:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-jsx\"}),`...\nconst Screen = () =\u003e {\n    const { data, mutate } = useDogs();\n    return \u003c\u003e\n        \u003cList data={data}\u003e\n        \u003cbutton onClick={() =\u003e {\n            mutate() // refetch the data\n        }}\u003e\n            Refetch\n        \u003c/button\u003e\n    \u003c/\u003e\n}\n`)),mdx(\"p\",null,\"Write the hook function once, use anywhere, no need to rewrite all the code again, keeping it clean.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-jsx\"}),`...\nconst ScreenA = () =\u003e {\n    const { data, mutate } = useDogs();\n    ...\n}\n\nconst ScreenB = () =\u003e {\n    const { data, mutate } = useDogs();\n    ...\n}\n`)),mdx(\"p\",null,\"Write the hook function once, use anywhere, no need to rewrite all the code again, keeping it clean.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-jsx\"}),`...\nconst ScreenA = () =\u003e {\n    const { data, mutate } = useDogs();\n    ...\n}\n\nconst ScreenB = () =\u003e {\n    const { data, mutate } = useDogs();\n    ...\n}\n`)),mdx(\"p\",null,\"You can rename the unpack values using destructuring assignment syntax.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-jsx\"}),`...\nconst ScreenA = () =\u003e {\n    const { data: dogs, mutate: mutateDogs } = useDogs();\n    const { data: cats, mutate: mutateCats } = useCats();\n    return \u003c\u003e\n        \u003cList data={dogs}\u003e\n        \u003cList data={cats}\u003e\n    \u003c/\u003e\n}\n\n`)),mdx(\"h2\",null,\"Conclusion\"),mdx(\"p\",null,\"SWR is a great library for data fetching in React, created by the same team behind Next.js, the React framework. It's a tool that i always use in every React project. I hope this post has been useful as we walked through some usage examples above.\"),mdx(\"p\",null,\"This is just the basic introduction to the library, if you want more information, check out:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Offical document: \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://swr.vercel.app\"}),\"swr.vercel.app\")),mdx(\"li\",{parentName:\"ul\"},\"Alternatives: \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://react-query.tanstack.com\"}),\"React-query\"))))}MDXContent.isMDXComponent=!0;\n","scope":{}},"readTime":5.47},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"data-fetching-in-React"},"buildId":"ZM-OxfxlK6U63EmP0APjj","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>