<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Data fetching in React with SWR</title><meta name="author" content="Felix Tran"/><meta name="description" ccontent="A guide through remote data fetching in React with SWR hooks."/><meta property="og:description" content="A guide through remote data fetching in React with SWR hooks."/><meta property="og:image"/><meta name="next-head-count" content="7"/><link rel="preload" href="/_next/static/css/27d177a30947857b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/27d177a30947857b.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-514908bffb652963.js" defer=""></script><script src="/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/_next/static/chunks/main-e47bb435dabe4202.js" defer=""></script><script src="/_next/static/chunks/pages/_app-9cd1d19dd7237c4c.js" defer=""></script><script src="/_next/static/chunks/78e521c3-d5a7cb22e7b83d41.js" defer=""></script><script src="/_next/static/chunks/68-7e719518c4a5d04e.js" defer=""></script><script src="/_next/static/chunks/675-7fcdd6e065e9b2ba.js" defer=""></script><script src="/_next/static/chunks/33-2cb9461a8b8c9f24.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-912a5efd7d0d9ce0.js" defer=""></script><script src="/_next/static/bWV6Z0oOve0KaKm-pve_a/_buildManifest.js" defer=""></script><script src="/_next/static/bWV6Z0oOve0KaKm-pve_a/_ssgManifest.js" defer=""></script><script src="/_next/static/bWV6Z0oOve0KaKm-pve_a/_middlewareManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.3">.oCZyU{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}/*!sc*/
data-styled.g2[id="sc-gsDKAQ"]{content:"oCZyU,"}/*!sc*/
.dFeLpy{margin-right:10px;-webkit-transition:0.2s ease all;transition:0.2s ease all;color:#222;}/*!sc*/
.dFeLpy:hover{color:#6e6e6e;}/*!sc*/
data-styled.g3[id="sc-dkPtRN"]{content:"dFeLpy,"}/*!sc*/
.iymazo{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background:#f5f5f7;min-height:100vh;}/*!sc*/
data-styled.g4[id="sc-hKwDye"]{content:"iymazo,"}/*!sc*/
.iJVfMx{margin-top:1em;border:1px solid #dfdfdf;}/*!sc*/
data-styled.g5[id="sc-eCImPb"]{content:"iJVfMx,"}/*!sc*/
.kgVmXR{position:relative;background:#2c2c2b;color:#fff;padding:5px 10px;font-size:12px;margin:0px;border-top-left-radius:6px;border-top-right-radius:6px;}/*!sc*/
data-styled.g8[id="sc-iCfMLu"]{content:"kgVmXR,"}/*!sc*/
.kejQuc{position:relative;margin-top:1em;margin-bottom:3em;-webkit-transition:all 200ms ease-in 0s;transition:all 200ms ease-in 0s;}/*!sc*/
data-styled.g9[id="sc-furwcr"]{content:"kejQuc,"}/*!sc*/
.kLeWzn{font-family:Arial,Helvetica,sans-serif;font-size:18px;outline-offset:2px;overflow-x:auto;margin:0px;padding-top:20px;padding-bottom:20px;min-height:50px;border-radius:10px;border-top-left-radius:0px;border-top-right-radius:0px;border-bottom-left-radius:6px;border-bottom-right-radius:6px;max-width:100vw;box-shadow:rgba(49,57,65,0.2) 0px 8px 14px;}/*!sc*/
data-styled.g10[id="sc-pVTFL"]{content:"kLeWzn,"}/*!sc*/
.bnosET{padding-left:20px;padding-bottom:2px;}/*!sc*/
.bnosET.highlight-line{background-color:rgba(220,220,234,0.12);}/*!sc*/
data-styled.g11[id="sc-jrQzAO"]{content:"bnosET,"}/*!sc*/
.gtJtqV{color:#224;font-size:16px;line-height:24px;background:rgba(0,0,0,0.05);border:1px solid rgba(0,0,0,0.1);padding:1px 2px;border-radius:4px;}/*!sc*/
data-styled.g12[id="sc-kDTinF"]{content:"gtJtqV,"}/*!sc*/
.ckEktv{-webkit-text-decoration:underline;text-decoration:underline;}/*!sc*/
data-styled.g13[id="sc-iqseJM"]{content:"ckEktv,"}/*!sc*/
.cramrR{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;cursor:pointer;-webkit-transition:0.4s ease all;transition:0.4s ease all;margin-top:1em;margin-bottom:1em;color:#a3a2a2;}/*!sc*/
.cramrR:hover{color:#222222;-webkit-transform:translate(0px,5px);-ms-transform:translate(0px,5px);transform:translate(0px,5px);}/*!sc*/
data-styled.g14[id="sc-crHmcD"]{content:"cramrR,"}/*!sc*/
.bfCwzx{color:#535354;padding:2px 4px;border:1px solid #rgba(0,0,0,0.2);border-radius:3px;margin-right:3px;cursor:default;background:rgba(0,0,0,0.1);}/*!sc*/
data-styled.g15[id="sc-egiyK"]{content:"bfCwzx,"}/*!sc*/
</style></head><body><div id="__next" data-reactroot=""><main class="sc-hKwDye iymazo"><div style="position:relative;flex:1;max-width:min(600px, 90vw)"><div class="sc-bdvvtL dYnyEB"><h2>felixtr</h2><div class="sc-gsDKAQ oCZyU"><div class="sc-dkPtRN dFeLpy"><a href="/about">about</a></div><div class="sc-dkPtRN dFeLpy"><a href="/">posts</a></div></div></div><main class="sc-eCImPb iJVfMx"></main><div style="position:relative;min-width:max(600px, 100vw)"></div><h1 style="margin-bottom:10px;font-size:3em">Data fetching in React with SWR</h1><p style="margin-top:0;color:rgb(110,110,115)">Feburary 1, 2022</p><span class="sc-egiyK bfCwzx">#<!-- -->react</span><span class="sc-egiyK bfCwzx">#<!-- -->library</span><span class="sc-egiyK bfCwzx">#<!-- -->hook</span><div style="position:relative;margin-top:20px;border-radius:8px;overflow:hidden;width:100%;height:max(260px, 14vw)"><span style="box-sizing:border-box;display:block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:absolute;top:0;left:0;bottom:0;right:0"><img alt="Data fetching in React with SWR" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="fill" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover"/><noscript><img alt="Data fetching in React with SWR" sizes="100vw" srcSet="https://tphuc.github.io/images/data-fetching-with-swr.png?auto=format&amp;fit=max&amp;w=640 640w, https://tphuc.github.io/images/data-fetching-with-swr.png?auto=format&amp;fit=max&amp;w=750 750w, https://tphuc.github.io/images/data-fetching-with-swr.png?auto=format&amp;fit=max&amp;w=828 828w, https://tphuc.github.io/images/data-fetching-with-swr.png?auto=format&amp;fit=max&amp;w=1080 1080w, https://tphuc.github.io/images/data-fetching-with-swr.png?auto=format&amp;fit=max&amp;w=1200 1200w, https://tphuc.github.io/images/data-fetching-with-swr.png?auto=format&amp;fit=max&amp;w=1920 1920w, https://tphuc.github.io/images/data-fetching-with-swr.png?auto=format&amp;fit=max&amp;w=2048 2048w, https://tphuc.github.io/images/data-fetching-with-swr.png?auto=format&amp;fit=max&amp;w=3840 3840w" src="https://tphuc.github.io/images/data-fetching-with-swr.png?auto=format&amp;fit=max&amp;w=3840" decoding="async" data-nimg="fill" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" loading="lazy"/></noscript></span></div><p>Fetching data is common task in every web application, basically you retrieve some information from your server to update some part of the UI of your webpage without having to reload the whole page.
Today we will have a look at SWR - a react hook library for data fetching in React.</p><h2>Problem Without SWR</h2><p>Traditionally, this is how you do fetching data inside a React component in the most basic form.
For this example, we have a function <code class="sc-kDTinF gtJtqV">fetchAllDogs</code> somewhere that retrieves a list of all <code class="sc-kDTinF gtJtqV">dogs</code> from server and display it.</p><div class="sc-furwcr kejQuc"><div class="sc-iCfMLu kgVmXR">jsx</div><pre class="sc-pVTFL kLeWzn prism-code language-jsx" style="color:rgb(234,234,235);background-color:rgba(54,54,57);font-family:var(--font-family-syntax);font-size:16px"><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token keyword" style="color:#fe7ab2">import</span><span class="token plain"> List </span><span class="token keyword" style="color:#fe7ab2">from</span><span class="token plain"> </span><span class="token string" style="color:#fe8170">&#x27;components/List&#x27;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain" style="display:inline-block">
</span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain" style="display:inline-block">
</span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain"></span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#6bdfff">Screen</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">dogs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> setDogs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> React</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:#6bdfff">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span></div><div class="sc-jrQzAO bnosET token-line highlight-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#6bdfff">fetchDogs</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token keyword" style="color:#fe7ab2">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line highlight-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token comment" style="color:#7f8c98;font-style:italic">// fetch from the server and update the state</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line highlight-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token keyword" style="color:#fe7ab2">let</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> data </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token keyword" style="color:#fe7ab2">await</span><span class="token plain"> </span><span class="token function" style="color:#6bdfff">fetch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token template-string template-punctuation string" style="color:#fe8170">`</span><span class="token template-string string" style="color:#fe8170">/all-dogs</span><span class="token template-string template-punctuation string" style="color:#fe8170">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:#6bdfff">then</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">r</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=&gt;</span><span class="token plain"> r</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:#6bdfff">json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line highlight-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token function" style="color:#6bdfff">setDogs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line highlight-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain" style="display:inline-block">
</span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token comment" style="color:#7f8c98;font-style:italic">// runs after first render</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    React</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:#6bdfff">useEffect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line highlight-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token function" style="color:#6bdfff">fetchDogs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain" style="display:inline-block">
</span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:#fe7ab2">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag class-name" style="color:#d9baff">List</span><span class="token tag" style="color:#fe7ab2"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">data</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token tag script language-javascript" style="color:#fe7ab2">dogs</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token tag" style="color:#fe7ab2"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:#fe7ab2">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div></pre></div><p>Now we want to improve the UX a little bit, add some loading indicator during fetching.
We create new variable state holds boolean value which indicates the loading state (true/false)</p><div class="sc-furwcr kejQuc"><div class="sc-iCfMLu kgVmXR">jsx</div><pre class="sc-pVTFL kLeWzn prism-code language-jsx" style="color:rgb(234,234,235);background-color:rgba(54,54,57);font-family:var(--font-family-syntax);font-size:16px"><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token keyword" style="color:#fe7ab2">import</span><span class="token plain"> List </span><span class="token keyword" style="color:#fe7ab2">from</span><span class="token plain"> </span><span class="token string" style="color:#fe8170">&#x27;components/List&#x27;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain" style="display:inline-block">
</span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain"></span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#6bdfff">Screen</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">dogs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> setDogs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> React</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:#6bdfff">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line highlight-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">loading</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> setLoading</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> React</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:#6bdfff">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:#7f8c98;font-style:italic">// initial = false</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain" style="display:inline-block">
</span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#6bdfff">fetchDogs</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token keyword" style="color:#fe7ab2">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line highlight-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token function" style="color:#6bdfff">setLoading</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token comment" style="color:#7f8c98;font-style:italic">// before fetching</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token keyword" style="color:#fe7ab2">let</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> data </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token keyword" style="color:#fe7ab2">await</span><span class="token plain"> </span><span class="token function" style="color:#6bdfff">fetch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token template-string template-punctuation string" style="color:#fe8170">`</span><span class="token template-string string" style="color:#fe8170">/all-dogs</span><span class="token template-string template-punctuation string" style="color:#fe8170">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:#6bdfff">then</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">r</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=&gt;</span><span class="token plain"> r</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:#6bdfff">json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token function" style="color:#6bdfff">setDogs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line highlight-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token function" style="color:#6bdfff">setLoading</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token comment" style="color:#7f8c98;font-style:italic">// finish fetching</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain" style="display:inline-block">
</span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token comment" style="color:#7f8c98;font-style:italic">// runs after first render</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    React</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:#6bdfff">useEffect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token function" style="color:#6bdfff">fetchDogs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain" style="display:inline-block">
</span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:#fe7ab2">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line highlight-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">loading </span><span class="token operator" style="color:#fe7ab2">?</span><span class="token plain"> </span><span class="token string" style="color:#fe8170">&#x27;fetching dogs...&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">:</span><span class="token plain"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag class-name" style="color:#d9baff">List</span><span class="token tag" style="color:#fe7ab2"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">data</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token tag script language-javascript" style="color:#fe7ab2">dogs</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token tag" style="color:#fe7ab2"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:#fe7ab2">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div></pre></div><p>What if an error occured during fetching <code class="sc-kDTinF gtJtqV">fetchAllDogs()</code> and we want to display the error message returned by the server.</p><div class="sc-furwcr kejQuc"><div class="sc-iCfMLu kgVmXR">jsx</div><pre class="sc-pVTFL kLeWzn prism-code language-jsx" style="color:rgb(234,234,235);background-color:rgba(54,54,57);font-family:var(--font-family-syntax);font-size:16px"><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token keyword" style="color:#fe7ab2">import</span><span class="token plain"> List </span><span class="token keyword" style="color:#fe7ab2">from</span><span class="token plain"> </span><span class="token string" style="color:#fe8170">&#x27;components/List&#x27;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain" style="display:inline-block">
</span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain"></span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#6bdfff">Screen</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">dogs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> setDogs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> React</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:#6bdfff">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">loading</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> setLoading</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> React</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:#6bdfff">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:#7f8c98;font-style:italic">// initial = false</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line highlight-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">errMsg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> setErrMsg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> React</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:#6bdfff">useState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:#fe8170">&quot;&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain" style="display:inline-block">
</span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#6bdfff">fetchDogs</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token keyword" style="color:#fe7ab2">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token function" style="color:#6bdfff">setLoading</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token comment" style="color:#7f8c98;font-style:italic">// before fetching</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token keyword" style="color:#fe7ab2">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">            </span><span class="token keyword" style="color:#fe7ab2">let</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> data </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token keyword" style="color:#fe7ab2">await</span><span class="token plain"> </span><span class="token function" style="color:#6bdfff">fetch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token template-string template-punctuation string" style="color:#fe8170">`</span><span class="token template-string string" style="color:#fe8170">/all-dogs</span><span class="token template-string template-punctuation string" style="color:#fe8170">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:#6bdfff">then</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">r</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=&gt;</span><span class="token plain"> r</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:#6bdfff">json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line highlight-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">            </span><span class="token function" style="color:#6bdfff">setDogs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token keyword" style="color:#fe7ab2">catch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">            </span><span class="token function" style="color:#6bdfff">setErrMsg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token function" style="color:#6bdfff">setLoading</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token comment" style="color:#7f8c98;font-style:italic">// finish fetching</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain" style="display:inline-block">
</span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token comment" style="color:#7f8c98;font-style:italic">// runs after first render</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    React</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:#6bdfff">useEffect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token function" style="color:#6bdfff">fetchDogs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain" style="display:inline-block">
</span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:#fe7ab2">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line highlight-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">errMsg </span><span class="token operator" style="color:#fe7ab2">?</span><span class="token plain"> errMsg </span><span class="token operator" style="color:#fe7ab2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">loading </span><span class="token operator" style="color:#fe7ab2">?</span><span class="token plain"> </span><span class="token string" style="color:#fe8170">&#x27;fetching dogs...&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">:</span><span class="token plain"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag class-name" style="color:#d9baff">List</span><span class="token tag" style="color:#fe7ab2"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">data</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token tag script language-javascript" style="color:#fe7ab2">dogs</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token tag" style="color:#fe7ab2"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:#fe7ab2">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div></pre></div><p>Now consider this</p><ul><li><p>What if you screen want to display the <code class="sc-kDTinF gtJtqV">cats</code> not just only <code class="sc-kDTinF gtJtqV">dogs</code>, do we have to go through the same process and create more <code class="sc-kDTinF gtJtqV">useState</code> variables as well ?</p><div class="sc-furwcr kejQuc"><div class="sc-iCfMLu kgVmXR">jsx</div><pre class="sc-pVTFL kLeWzn prism-code language-jsx" style="color:rgb(234,234,235);background-color:rgba(54,54,57);font-family:var(--font-family-syntax);font-size:16px"><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token operator" style="color:#fe7ab2">...</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag class-name" style="color:#d9baff">List</span><span class="token tag" style="color:#fe7ab2"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">data</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token tag script language-javascript" style="color:#fe7ab2">dogs</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token tag" style="color:#fe7ab2"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag class-name" style="color:#d9baff">List</span><span class="token tag" style="color:#fe7ab2"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">data</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token tag script language-javascript" style="color:#fe7ab2">cats</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token tag" style="color:#fe7ab2"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div></pre></div></li><li><p>What if you have another <code class="sc-kDTinF gtJtqV">ScreenB</code> that wants to display the <code class="sc-kDTinF gtJtqV">dogs</code> as well, do we have to write all the same code over again ?</p><div class="sc-furwcr kejQuc"><div class="sc-iCfMLu kgVmXR">jsx</div><pre class="sc-pVTFL kLeWzn prism-code language-jsx" style="color:rgb(234,234,235);background-color:rgba(54,54,57);font-family:var(--font-family-syntax);font-size:16px"><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#6bdfff">ScreenA</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token operator" style="color:#fe7ab2">...</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token keyword" style="color:#fe7ab2">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag class-name" style="color:#d9baff">List</span><span class="token tag" style="color:#fe7ab2"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">data</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token tag script language-javascript" style="color:#fe7ab2">dogs</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token tag" style="color:#fe7ab2"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain" style="display:inline-block">
</span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#6bdfff">ScreenB</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token operator" style="color:#fe7ab2">...</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token keyword" style="color:#fe7ab2">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag class-name" style="color:#d9baff">List</span><span class="token tag" style="color:#fe7ab2"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">data</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token tag script language-javascript" style="color:#fe7ab2">dogs</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token tag" style="color:#fe7ab2"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div></pre></div></li></ul><p>Eventually our code is a bunch of mess! What is the solution for this 🤔?</p><h2>With SWR hook</h2><p>What we want is to actually move all of the fetching code with the states variable into a hook function. Click <a href="https://reactjs.org/docs/hooks-overview.html" class="sc-iqseJM ckEktv">here</a> if you want to read more about React Hooks. </p><div class="sc-furwcr kejQuc"><div class="sc-iCfMLu kgVmXR">jsx</div><pre class="sc-pVTFL kLeWzn prism-code language-jsx" style="color:rgb(234,234,235);background-color:rgba(54,54,57);font-family:var(--font-family-syntax);font-size:16px"><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> loading</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> errMsg </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token function" style="color:#6bdfff">useDogs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div></pre></div><p>We will use <code class="sc-kDTinF gtJtqV">swr</code> to implement the function <code class="sc-kDTinF gtJtqV">useDogs</code>. Firstly install <code class="sc-kDTinF gtJtqV">swr</code> via <code class="sc-kDTinF gtJtqV">yarn add swr</code> or <code class="sc-kDTinF gtJtqV">npm install swr</code>.
For best practices, we will create the function in another file and export it out.</p><div class="sc-furwcr kejQuc"><div class="sc-iCfMLu kgVmXR">swr/use-dogs.js</div><pre class="sc-pVTFL kLeWzn prism-code language-jsx" style="color:rgb(234,234,235);background-color:rgba(54,54,57);font-family:var(--font-family-syntax);font-size:16px"><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token keyword" style="color:#fe7ab2">import</span><span class="token plain"> useSWR </span><span class="token keyword" style="color:#fe7ab2">from</span><span class="token plain"> </span><span class="token string" style="color:#fe8170">&#x27;swr&#x27;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain" style="display:inline-block">
</span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain"></span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#6bdfff">fetcher</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token keyword" style="color:#fe7ab2">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">url</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> data </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token keyword" style="color:#fe7ab2">await</span><span class="token plain"> </span><span class="token function" style="color:#6bdfff">fetch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:#6bdfff">then</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">r</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=&gt;</span><span class="token plain"> r</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:#6bdfff">json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">return</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain" style="display:inline-block">
</span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain"></span><span class="token keyword" style="color:#fe7ab2">export</span><span class="token plain"> </span><span class="token keyword" style="color:#fe7ab2">default</span><span class="token plain"> </span><span class="token keyword" style="color:#fe7ab2">function</span><span class="token plain"> </span><span class="token function" style="color:#6bdfff">useDogs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> mutate </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token function" style="color:#6bdfff">useSWR</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:#fe8170">&#x27;/get-dogs&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> fetcher</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain" style="display:inline-block">
</span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        data</span><span class="token operator" style="color:#fe7ab2">:</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        loading</span><span class="token operator" style="color:#fe7ab2">:</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">!</span><span class="token plain">error </span><span class="token operator" style="color:#fe7ab2">&amp;&amp;</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">!</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        errMsg</span><span class="token operator" style="color:#fe7ab2">:</span><span class="token plain"> error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        mutate</span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div></pre></div><p>This function is pretty straight forward. Let&#x27;s me explain:</p><ul><li>First param of <code class="sc-kDTinF gtJtqV">useSWR</code> will be the arguments of <code class="sc-kDTinF gtJtqV">fetcher</code>.<div class="sc-furwcr kejQuc"><div class="sc-iCfMLu kgVmXR">js</div><pre class="sc-pVTFL kLeWzn prism-code language-js" style="color:rgb(234,234,235);background-color:rgba(54,54,57);font-family:var(--font-family-syntax);font-size:16px"><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token comment" style="color:#7f8c98;font-style:italic">// this is equivalent</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> mutate </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token function" style="color:#6bdfff">useSWR</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:#fe8170">&#x27;/get-dogs&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">url</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#fe7ab2">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#6bdfff">fetch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:#6bdfff">then</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">r</span><span class="token plain"> </span><span class="token arrow operator" style="color:#fe7ab2">=&gt;</span><span class="token plain"> r</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:#6bdfff">json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div></pre></div></li><li>SWR automatically do the error handling for us. If an error is thrown inside <code class="sc-kDTinF gtJtqV">fetcher</code>, it will be returned as error by the hook.</li><li>If you want to pass in multiple arguments<div class="sc-furwcr kejQuc"><div class="sc-iCfMLu kgVmXR">js</div><pre class="sc-pVTFL kLeWzn prism-code language-js" style="color:rgb(234,234,235);background-color:rgba(54,54,57);font-family:var(--font-family-syntax);font-size:16px"><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> mutate </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token function" style="color:#6bdfff">useSWR</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:#fe8170">&#x27;/get-dogs&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token comment" style="color:#7f8c98;font-style:italic">// fetch from /get-dogs/1</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">url</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#fe7ab2">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#6bdfff">fetch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">url </span><span class="token operator" style="color:#fe7ab2">+</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#fe8170">`</span><span class="token template-string string" style="color:#fe8170">/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string template-punctuation string" style="color:#fe8170">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:#6bdfff">then</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">r</span><span class="token plain"> </span><span class="token arrow operator" style="color:#fe7ab2">=&gt;</span><span class="token plain"> r</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:#6bdfff">json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div></pre></div></li></ul><p>Now we have the <code class="sc-kDTinF gtJtqV">useDogs</code> hooks with <code class="sc-kDTinF gtJtqV">swr</code>, let&#x27;s rewrite our <code class="sc-kDTinF gtJtqV">Screen</code>.</p><div class="sc-furwcr kejQuc"><div class="sc-iCfMLu kgVmXR">jsx</div><pre class="sc-pVTFL kLeWzn prism-code language-jsx" style="color:rgb(234,234,235);background-color:rgba(54,54,57);font-family:var(--font-family-syntax);font-size:16px"><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token keyword" style="color:#fe7ab2">import</span><span class="token plain"> useDogs </span><span class="token keyword" style="color:#fe7ab2">from</span><span class="token plain"> </span><span class="token string" style="color:#fe8170">&#x27;swr/use-dogs&#x27;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain"></span><span class="token keyword" style="color:#fe7ab2">import</span><span class="token plain"> List </span><span class="token keyword" style="color:#fe7ab2">from</span><span class="token plain"> </span><span class="token string" style="color:#fe8170">&#x27;componets/List&#x27;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain" style="display:inline-block">
</span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain"></span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#6bdfff">Screen</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> loading</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> errMsg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> mutate </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token function" style="color:#6bdfff">useDogs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:#fe7ab2">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">loading </span><span class="token operator" style="color:#fe7ab2">&amp;&amp;</span><span class="token plain"> </span><span class="token string" style="color:#fe8170">&#x27;loading...&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">errMsg </span><span class="token operator" style="color:#fe7ab2">&amp;&amp;</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#fe8170">`</span><span class="token template-string string" style="color:#fe8170">an error occured: </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">${</span><span class="token template-string interpolation">errMsg</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token template-string template-punctuation string" style="color:#fe8170">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">data </span><span class="token operator" style="color:#fe7ab2">&amp;&amp;</span><span class="token plain"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag class-name" style="color:#d9baff">List</span><span class="token tag" style="color:#fe7ab2"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">data</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token tag script language-javascript" style="color:#fe7ab2">data</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token tag" style="color:#fe7ab2"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:#fe7ab2">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain" style="display:inline-block">
</span></div></pre></div><p>As you may have noticed our function hook returns more than just data, loading and error, it also returns <code class="sc-kDTinF gtJtqV">mutate</code>. What is <code class="sc-kDTinF gtJtqV">mutate</code>?
<a href="https://swr.vercel.app/docs/mutation" class="sc-iqseJM ckEktv"><code class="sc-kDTinF gtJtqV">mutate</code></a> is a special function can update your local data programmatically, while revalidating and finally replace it with the latest data. For example you may want to refetch the data after certain actions. Let&#x27;s create a button that trigger refetching:</p><div class="sc-furwcr kejQuc"><div class="sc-iCfMLu kgVmXR">jsx</div><pre class="sc-pVTFL kLeWzn prism-code language-jsx" style="color:rgb(234,234,235);background-color:rgba(54,54,57);font-family:var(--font-family-syntax);font-size:16px"><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token operator" style="color:#fe7ab2">...</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain"></span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#6bdfff">Screen</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> mutate </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token function" style="color:#6bdfff">useDogs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag class-name" style="color:#d9baff">List</span><span class="token tag" style="color:#fe7ab2"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">data</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token tag script language-javascript" style="color:#fe7ab2">data</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:#fe7ab2">button</span><span class="token tag" style="color:#fe7ab2"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token tag script language-javascript" style="color:#fe7ab2"> </span><span class="token tag script language-javascript operator" style="color:#fe7ab2">=&gt;</span><span class="token tag script language-javascript" style="color:#fe7ab2"> </span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token tag script language-javascript" style="color:#fe7ab2"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token tag script language-javascript" style="color:#fe7ab2">            </span><span class="token tag script language-javascript function" style="color:#6bdfff">mutate</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token tag script language-javascript" style="color:#fe7ab2"> </span><span class="token tag script language-javascript comment" style="color:#7f8c98;font-style:italic">// refetch the data</span><span class="token tag script language-javascript" style="color:#fe7ab2"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token tag script language-javascript" style="color:#fe7ab2">        </span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">            Refetch</span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:#fe7ab2">button</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div></pre></div><p>Write the hook function once, use anywhere, no need to rewrite all the code again, keeping it clean.</p><div class="sc-furwcr kejQuc"><div class="sc-iCfMLu kgVmXR">jsx</div><pre class="sc-pVTFL kLeWzn prism-code language-jsx" style="color:rgb(234,234,235);background-color:rgba(54,54,57);font-family:var(--font-family-syntax);font-size:16px"><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token operator" style="color:#fe7ab2">...</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain"></span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#6bdfff">ScreenA</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> mutate </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token function" style="color:#6bdfff">useDogs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token operator" style="color:#fe7ab2">...</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain" style="display:inline-block">
</span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain"></span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#6bdfff">ScreenB</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> mutate </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token function" style="color:#6bdfff">useDogs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token operator" style="color:#fe7ab2">...</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div></pre></div><p>Write the hook function once, use anywhere, no need to rewrite all the code again, keeping it clean.</p><div class="sc-furwcr kejQuc"><div class="sc-iCfMLu kgVmXR">jsx</div><pre class="sc-pVTFL kLeWzn prism-code language-jsx" style="color:rgb(234,234,235);background-color:rgba(54,54,57);font-family:var(--font-family-syntax);font-size:16px"><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token operator" style="color:#fe7ab2">...</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain"></span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#6bdfff">ScreenA</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> mutate </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token function" style="color:#6bdfff">useDogs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token operator" style="color:#fe7ab2">...</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain" style="display:inline-block">
</span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain"></span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#6bdfff">ScreenB</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> mutate </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token function" style="color:#6bdfff">useDogs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token operator" style="color:#fe7ab2">...</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div></pre></div><p>You can rename the unpack values using destructuring assignment syntax.</p><div class="sc-furwcr kejQuc"><div class="sc-iCfMLu kgVmXR">jsx</div><pre class="sc-pVTFL kLeWzn prism-code language-jsx" style="color:rgb(234,234,235);background-color:rgba(54,54,57);font-family:var(--font-family-syntax);font-size:16px"><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token operator" style="color:#fe7ab2">...</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain"></span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#6bdfff">ScreenA</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> data</span><span class="token operator" style="color:#fe7ab2">:</span><span class="token plain"> dogs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> mutate</span><span class="token operator" style="color:#fe7ab2">:</span><span class="token plain"> mutateDogs </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token function" style="color:#6bdfff">useDogs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> data</span><span class="token operator" style="color:#fe7ab2">:</span><span class="token plain"> cats</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> mutate</span><span class="token operator" style="color:#fe7ab2">:</span><span class="token plain"> mutateCats </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:#fe7ab2">=</span><span class="token plain"> </span><span class="token function" style="color:#6bdfff">useCats</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token keyword" style="color:#fe7ab2">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag class-name" style="color:#d9baff">List</span><span class="token tag" style="color:#fe7ab2"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">data</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token tag script language-javascript" style="color:#fe7ab2">dogs</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag class-name" style="color:#d9baff">List</span><span class="token tag" style="color:#fe7ab2"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">data</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token tag script language-javascript" style="color:#fe7ab2">cats</span><span class="token tag script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="sc-jrQzAO bnosET token-line" style="color:rgb(234,234,235);font-family:var(--font-family-syntax);font-size:16px"><span class="token plain" style="display:inline-block">
</span></div></pre></div><h2>Conclusion</h2><p>SWR is a great library for data fetching in React, created by the same team behind Next.js, the React framework. It&#x27;s a tool that i always use in every React project. I hope this post has been useful as we walked through some usage examples above.</p><p>This is just the basic introduction to the library, if you want more information, check out:</p><ul><li>Offical document: <a href="https://swr.vercel.app" class="sc-iqseJM ckEktv">swr.vercel.app</a></li><li>Alternatives: <a href="https://react-query.tanstack.com" class="sc-iqseJM ckEktv">React-query</a></li></ul><div href="/" class="sc-crHmcD cramrR"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><g><path fill="none" d="M0 0h24v24H0z"></path><path d="M7.828 11H20v2H7.828l5.364 5.364-1.414 1.414L4 12l7.778-7.778 1.414 1.414z"></path></g></svg><span>back to all posts</span> </div></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontMatter":{"title":"Data fetching in React with SWR","description":"A guide through remote data fetching in React with SWR hooks.","date":"Feburary 1, 2022","tags":["react","library","hook"],"level":"Intermediate","thumbnail":"images/data-fetching-with-swr.png"},"slug":"data-fetching-in-React","mdxSource":{"compiledSource":"var p=Object.defineProperty,u=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var r=Object.getOwnPropertySymbols;var s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;var l=(t,a,n)=\u003ea in t?p(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,e=(t,a)=\u003e{for(var n in a||(a={}))s.call(a,n)\u0026\u0026l(t,n,a[n]);if(r)for(var n of r(a))i.call(a,n)\u0026\u0026l(t,n,a[n]);return t},c=(t,a)=\u003eu(t,h(a));var d=(t,a)=\u003e{var n={};for(var o in t)s.call(t,o)\u0026\u0026a.indexOf(o)\u003c0\u0026\u0026(n[o]=t[o]);if(t!=null\u0026\u0026r)for(var o of r(t))a.indexOf(o)\u003c0\u0026\u0026i.call(t,o)\u0026\u0026(n[o]=t[o]);return n};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(n){var o=n,{components:t}=o,a=d(o,[\"components\"]);return mdx(MDXLayout,c(e(e({},layoutProps),a),{components:t,mdxType:\"MDXLayout\"}),mdx(\"p\",null,`Fetching data is common task in every web application, basically you retrieve some information from your server to update some part of the UI of your webpage without having to reload the whole page.\nToday we will have a look at SWR - a react hook library for data fetching in React.`),mdx(\"h2\",null,\"Problem Without SWR\"),mdx(\"p\",null,`Traditionally, this is how you do fetching data inside a React component in the most basic form.\nFor this example, we have a function `,mdx(\"inlineCode\",{parentName:\"p\"},\"fetchAllDogs\"),\" somewhere that retrieves a list of all \",mdx(\"inlineCode\",{parentName:\"p\"},\"dogs\"),\" from server and display it.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-jsx\",metastring:\"{7-11,15}\",\"{7-11,15}\":!0}),`import List from 'components/List'\n\n\nconst Screen = () =\u003e {\n    const [dogs, setDogs] = React.useState();\n    \n    const fetchDogs = async () =\u003e {\n        // fetch from the server and update the state\n        let { data } = await fetch(\\`/all-dogs\\`).then(r =\u003e r.json());\n        setDogs(data);\n    }\n\n    // runs after first render\n    React.useEffect(() =\u003e {\n        fetchDogs()\n    }, [])\n\n    return (\n        \u003cdiv\u003e\n            \u003cList data={dogs} \u003e\n        \u003c/div\u003e\n    )\n}\n`)),mdx(\"p\",null,`Now we want to improve the UX a little bit, add some loading indicator during fetching.\nWe create new variable state holds boolean value which indicates the loading state (true/false)`),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-jsx\",metastring:\"{5,8,11,21}\",\"{5,8,11,21}\":!0}),`import List from 'components/List'\n\nconst Screen = () =\u003e {\n    const [dogs, setDogs] = React.useState();\n    const [loading, setLoading] = React.useState(false); // initial = false\n\n    const fetchDogs = async () =\u003e {\n        setLoading(true);  // before fetching\n        let { data } = await fetch(\\`/all-dogs\\`).then(r =\u003e r.json()));\n        setDogs(data);\n        setLoading(false);  // finish fetching\n    }\n\n    // runs after first render\n    React.useEffect(() =\u003e {\n        fetchDogs()\n    }, [])\n\n    return (\n        \u003cdiv\u003e\n            {loading ? 'fetching dogs...' : \u003cList data={dogs} \u003e}\n        \u003c/div\u003e\n    )\n}\n`)),mdx(\"p\",null,\"What if an error occured during fetching \",mdx(\"inlineCode\",{parentName:\"p\"},\"fetchAllDogs()\"),\" and we want to display the error message returned by the server.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-jsx\",metastring:\"{6,12,27}\",\"{6,12,27}\":!0}),`import List from 'components/List'\n\nconst Screen = () =\u003e {\n    const [dogs, setDogs] = React.useState();\n    const [loading, setLoading] = React.useState(false); // initial = false\n    const [errMsg, setErrMsg] = React.useState(\"\");\n\n    const fetchDogs = async () =\u003e {\n        setLoading(true);  // before fetching\n        try {\n            let { data } = await fetch(\\`/all-dogs\\`).then(r =\u003e r.json());\n            setDogs(data);\n        }\n        catch(err){\n            setErrMsg(err)\n        }\n        setLoading(false);  // finish fetching\n    }\n\n    // runs after first render\n    React.useEffect(() =\u003e {\n        fetchDogs()\n    }, [])\n\n    return (\n        \u003cdiv\u003e\n            {errMsg ? errMsg : (loading ? 'fetching dogs...' : \u003cList data={dogs} \u003e)}\n        \u003c/div\u003e\n    )\n}\n`)),mdx(\"p\",null,\"Now consider this\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\"},\"What if you screen want to display the \",mdx(\"inlineCode\",{parentName:\"p\"},\"cats\"),\" not just only \",mdx(\"inlineCode\",{parentName:\"p\"},\"dogs\"),\", do we have to go through the same process and create more \",mdx(\"inlineCode\",{parentName:\"p\"},\"useState\"),\" variables as well ?\"),mdx(\"pre\",{parentName:\"li\"},mdx(\"code\",e({parentName:\"pre\"},{className:\"language-jsx\"}),`        ...\n        \u003cList data={dogs} \u003e\n        \u003cList data={cats} \u003e\n`))),mdx(\"li\",{parentName:\"ul\"},mdx(\"p\",{parentName:\"li\"},\"What if you have another \",mdx(\"inlineCode\",{parentName:\"p\"},\"ScreenB\"),\" that wants to display the \",mdx(\"inlineCode\",{parentName:\"p\"},\"dogs\"),\" as well, do we have to write all the same code over again ?\"),mdx(\"pre\",{parentName:\"li\"},mdx(\"code\",e({parentName:\"pre\"},{className:\"language-jsx\"}),`    const ScreenA = () =\u003e {\n        ...\n        return \u003cList data={dogs} /\u003e\n    }\n\n    const ScreenB = () =\u003e {\n        ...\n        return \u003cList data={dogs} /\u003e\n    }\n`)))),mdx(\"p\",null,\"Eventually our code is a bunch of mess! What is the solution for this \\u{1F914}?\"),mdx(\"h2\",null,\"With SWR hook\"),mdx(\"p\",null,\"What we want is to actually move all of the fetching code with the states variable into a hook function. Click \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://reactjs.org/docs/hooks-overview.html\"}),\"here\"),\" if you want to read more about React Hooks. \"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-jsx\"}),`const {data, loading, errMsg } = useDogs();\n`)),mdx(\"p\",null,\"We will use \",mdx(\"inlineCode\",{parentName:\"p\"},\"swr\"),\" to implement the function \",mdx(\"inlineCode\",{parentName:\"p\"},\"useDogs\"),\". Firstly install \",mdx(\"inlineCode\",{parentName:\"p\"},\"swr\"),\" via \",mdx(\"inlineCode\",{parentName:\"p\"},\"yarn add swr\"),\" or \",mdx(\"inlineCode\",{parentName:\"p\"},\"npm install swr\"),`.\nFor best practices, we will create the function in another file and export it out.`),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-jsx\",metastring:\"file=swr/use-dogs.js\",file:\"swr/use-dogs.js\"}),`import useSWR from 'swr'\n\nconst fetcher = async (url) =\u003e {\n    const { data } = await fetch(url).then(r =\u003e r.json());\n    return data;\n}\n\nexport default function useDogs() {\n    const { data, error, mutate } = useSWR('/get-dogs', fetcher)\n\n    return {\n        data: data,\n        loading: !error \u0026\u0026 !data,\n        errMsg: error,\n        mutate\n    }\n}\n`)),mdx(\"p\",null,\"This function is pretty straight forward. Let's me explain:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"First param of \",mdx(\"inlineCode\",{parentName:\"li\"},\"useSWR\"),\" will be the arguments of \",mdx(\"inlineCode\",{parentName:\"li\"},\"fetcher\"),\".\",mdx(\"pre\",{parentName:\"li\"},mdx(\"code\",e({parentName:\"pre\"},{className:\"language-js\"}),`    // this is equivalent\n    const { data, error, mutate } = useSWR(['/get-dogs'], \n        (url) =\u003e fetch(url).then(r =\u003e r.json())\n    )\n`))),mdx(\"li\",{parentName:\"ul\"},\"SWR automatically do the error handling for us. If an error is thrown inside \",mdx(\"inlineCode\",{parentName:\"li\"},\"fetcher\"),\", it will be returned as error by the hook.\"),mdx(\"li\",{parentName:\"ul\"},\"If you want to pass in multiple arguments\",mdx(\"pre\",{parentName:\"li\"},mdx(\"code\",e({parentName:\"pre\"},{className:\"language-js\"}),`    const { data, error, mutate } = useSWR(['/get-dogs', 1], \n        // fetch from /get-dogs/1\n        (url, id) =\u003e fetch(url + \\`/\\${id}\\`).then(r =\u003e r.json())\n    )\n`)))),mdx(\"p\",null,\"Now we have the \",mdx(\"inlineCode\",{parentName:\"p\"},\"useDogs\"),\" hooks with \",mdx(\"inlineCode\",{parentName:\"p\"},\"swr\"),\", let's rewrite our \",mdx(\"inlineCode\",{parentName:\"p\"},\"Screen\"),\".\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-jsx\"}),`import useDogs from 'swr/use-dogs'\nimport List from 'componets/List'\n\nconst Screen = () =\u003e {\n    const { data, loading, errMsg, mutate } = useDogs();\n    return (\n        \u003cdiv\u003e\n            {loading \u0026\u0026 'loading...'}\n            {errMsg \u0026\u0026 \\`an error occured: \\${errMsg}\\`}\n            {data \u0026\u0026 \u003cList data={data} \u003e}\n        \u003c/div\u003e\n    )\n}\n\n`)),mdx(\"p\",null,\"As you may have noticed our function hook returns more than just data, loading and error, it also returns \",mdx(\"inlineCode\",{parentName:\"p\"},\"mutate\"),\". What is \",mdx(\"inlineCode\",{parentName:\"p\"},\"mutate\"),`?\n`,mdx(\"a\",e({parentName:\"p\"},{href:\"https://swr.vercel.app/docs/mutation\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"mutate\")),\" is a special function can update your local data programmatically, while revalidating and finally replace it with the latest data. For example you may want to refetch the data after certain actions. Let's create a button that trigger refetching:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-jsx\"}),`...\nconst Screen = () =\u003e {\n    const { data, mutate } = useDogs();\n    return \u003c\u003e\n        \u003cList data={data}\u003e\n        \u003cbutton onClick={() =\u003e {\n            mutate() // refetch the data\n        }}\u003e\n            Refetch\n        \u003c/button\u003e\n    \u003c/\u003e\n}\n`)),mdx(\"p\",null,\"Write the hook function once, use anywhere, no need to rewrite all the code again, keeping it clean.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-jsx\"}),`...\nconst ScreenA = () =\u003e {\n    const { data, mutate } = useDogs();\n    ...\n}\n\nconst ScreenB = () =\u003e {\n    const { data, mutate } = useDogs();\n    ...\n}\n`)),mdx(\"p\",null,\"Write the hook function once, use anywhere, no need to rewrite all the code again, keeping it clean.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-jsx\"}),`...\nconst ScreenA = () =\u003e {\n    const { data, mutate } = useDogs();\n    ...\n}\n\nconst ScreenB = () =\u003e {\n    const { data, mutate } = useDogs();\n    ...\n}\n`)),mdx(\"p\",null,\"You can rename the unpack values using destructuring assignment syntax.\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-jsx\"}),`...\nconst ScreenA = () =\u003e {\n    const { data: dogs, mutate: mutateDogs } = useDogs();\n    const { data: cats, mutate: mutateCats } = useCats();\n    return \u003c\u003e\n        \u003cList data={dogs}\u003e\n        \u003cList data={cats}\u003e\n    \u003c/\u003e\n}\n\n`)),mdx(\"h2\",null,\"Conclusion\"),mdx(\"p\",null,\"SWR is a great library for data fetching in React, created by the same team behind Next.js, the React framework. It's a tool that i always use in every React project. I hope this post has been useful as we walked through some usage examples above.\"),mdx(\"p\",null,\"This is just the basic introduction to the library, if you want more information, check out:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"Offical document: \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://swr.vercel.app\"}),\"swr.vercel.app\")),mdx(\"li\",{parentName:\"ul\"},\"Alternatives: \",mdx(\"a\",e({parentName:\"li\"},{href:\"https://react-query.tanstack.com\"}),\"React-query\"))))}MDXContent.isMDXComponent=!0;\n","scope":{}}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"data-fetching-in-React"},"buildId":"bWV6Z0oOve0KaKm-pve_a","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>